/*
  Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
*/
(function(){'use strict';var g,l=this;function n(a){return void 0!==a}function aa(){}
function ba(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ca(a){return null!=a}function da(a){var b=ba(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ea(a){return"string"==typeof a}function fa(a){return"function"==ba(a)}function ha(a){return a[ia]||(a[ia]=++ja)}var ia="closure_uid_"+(1E9*Math.random()>>>0),ja=0;function ka(a,b,c){return a.call.apply(a.bind,arguments)}
function la(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function ma(a,b,c){ma=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ka:la;return ma.apply(null,arguments)}
function na(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function p(a,b){var c=a.split("."),d=l;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&n(b)?d[e]=b:d[e]?d=d[e]:d=d[e]={}}
function q(a,b){function c(){}c.prototype=b.prototype;a.na=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Vb=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function oa(a){if(Error.captureStackTrace)Error.captureStackTrace(this,oa);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}q(oa,Error);oa.prototype.name="CustomError";var pa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function qa(a){var b=0,c=pa(String(ra)).split(".");a=pa(String(a)).split(".");for(var d=Math.max(c.length,a.length),e=0;0==b&&e<d;e++){var f=c[e]||"",h=a[e]||"",k=/(\d*)(\D*)/g,m=/(\d*)(\D*)/g;do{var z=k.exec(f)||["","",""],Y=m.exec(h)||["","",""];if(0==z[0].length&&0==Y[0].length)break;b=sa(0==z[1].length?0:parseInt(z[1],10),0==Y[1].length?0:parseInt(Y[1],10))||sa(0==z[2].length,0==Y[2].length)||sa(z[2],Y[2])}while(0==b)}return b}function sa(a,b){return a<b?-1:a>b?1:0};var ta=Array.prototype,ua=ta.indexOf?function(a,b,c){return ta.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ea(a))return ea(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},va=ta.forEach?function(a,b,c){ta.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ea(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},wa=ta.map?function(a,b,c){return ta.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),
f=ea(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},xa=ta.reduce?function(a,b,c,d){d&&(b=ma(b,d));return ta.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;va(a,function(c,h){e=b.call(d,e,c,h,a)});return e},ya=ta.some?function(a,b,c){return ta.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ea(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};function za(a,b,c){return 2>=arguments.length?ta.slice.call(a,b):ta.slice.call(a,b,c)}
function Aa(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ba(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==ba(d))for(var e=0;e<d.length;e+=8192)for(var f=Ba.apply(null,za(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};var Ca;a:{var Da=l.navigator;if(Da){var Ea=Da.userAgent;if(Ea){Ca=Ea;break a}}Ca=""}function r(a){return-1!=Ca.indexOf(a)};function Fa(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b};function Ga(){return r("Opera")||r("OPR")}function Ha(){return(r("Chrome")||r("CriOS"))&&!Ga()&&!r("Edge")};function Ia(a){l.setTimeout(function(){throw a;},0)}var Ja;
function Ka(){var a=l.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!r("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=ma(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!r("Trident")&&!r("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(n(c.next)){c=c.next;var a=c.wb;c.wb=null;a()}};return function(a){d.next={wb:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){l.setTimeout(a,0)}};function La(a,b,c){this.f=c;this.c=a;this.g=b;this.b=0;this.a=null}La.prototype.get=function(){var a;0<this.b?(this.b--,a=this.a,this.a=a.next,a.next=null):a=this.c();return a};La.prototype.put=function(a){this.g(a);this.b<this.f&&(this.b++,a.next=this.a,this.a=a)};function Na(){this.b=this.a=null}var Pa=new La(function(){return new Oa},function(a){a.reset()},100);Na.prototype.add=function(a,b){var c=Pa.get();c.set(a,b);this.b?this.b.next=c:this.a=c;this.b=c};Na.prototype.remove=function(){var a=null;this.a&&(a=this.a,this.a=this.a.next,this.a||(this.b=null),a.next=null);return a};function Oa(){this.next=this.b=this.a=null}Oa.prototype.set=function(a,b){this.a=a;this.b=b;this.next=null};Oa.prototype.reset=function(){this.next=this.b=this.a=null};function Qa(a,b){Ra||Sa();Ta||(Ra(),Ta=!0);Ua.add(a,b)}var Ra;function Sa(){if(l.Promise&&l.Promise.resolve){var a=l.Promise.resolve(void 0);Ra=function(){a.then(Va)}}else Ra=function(){var a=Va;!fa(l.setImmediate)||l.Window&&l.Window.prototype&&l.Window.prototype.setImmediate==l.setImmediate?(Ja||(Ja=Ka()),Ja(a)):l.setImmediate(a)}}var Ta=!1,Ua=new Na;function Va(){for(var a=null;a=Ua.remove();){try{a.a.call(a.b)}catch(b){Ia(b)}Pa.put(a)}Ta=!1};function Wa(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var m=0;m<f+1;m++)h[0][m]=0;for(k=1;k<=e;k++)for(m=1;m<=f;m++)c(a[k-1],b[m-1])?h[k][m]=h[k-1][m-1]+1:h[k][m]=Math.max(h[k-1][m],h[k][m-1]);for(var z=[],k=e,m=f;0<k&&0<m;)c(a[k-1],b[m-1])?(z.unshift(d(k-1,m-1)),k--,m--):h[k-1][m]>h[k][m-1]?k--:m--;return z}function Xa(a){return xa(arguments,function(a,c){return a+c},0)}
function Ya(a){return Xa.apply(null,arguments)/arguments.length}function Za(a){var b=arguments.length;if(2>b)return 0;var c=Ya.apply(null,arguments);return Xa.apply(null,wa(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function $a(a){return Math.sqrt(Za.apply(null,arguments))};var ab="StopIteration"in l?l.StopIteration:{message:"StopIteration",stack:""};function bb(){}bb.prototype.next=function(){throw ab;};bb.prototype.Na=function(){return this};function cb(a){if(a instanceof bb)return a;if("function"==typeof a.Na)return a.Na(!1);if(da(a)){var b=0,c=new bb;c.next=function(){for(;;){if(b>=a.length)throw ab;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function db(a,b){if(da(a))try{va(a,b,void 0)}catch(c){if(c!==ab)throw c;}else{a=cb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==ab)throw c;}}}function eb(a){if(ya(arguments,function(a){return!a.length})||!arguments.length)return new bb;var b=new bb,c=arguments,d=Aa(c.length);b.next=function(){if(d){for(var a=wa(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw ab;};return b};function fb(){return r("iPhone")&&!r("iPod")&&!r("iPad")};function t(a,b){this.a=gb;this.j=void 0;this.c=this.b=this.f=null;this.g=this.h=!1;if(a!=aa)try{var c=this;a.call(b,function(a){hb(c,ib,a)},function(a){hb(c,jb,a)})}catch(d){hb(this,jb,d)}}var gb=0,ib=2,jb=3;function kb(){this.next=this.context=this.b=this.c=this.a=null;this.f=!1}kb.prototype.reset=function(){this.context=this.b=this.c=this.a=null;this.f=!1};var lb=new La(function(){return new kb},function(a){a.reset()},100);function mb(a,b,c){var d=lb.get();d.c=a;d.b=b;d.context=c;return d}
function u(a){if(a instanceof t)return a;var b=new t(aa);hb(b,ib,a);return b}function nb(a){return new t(function(b,c){c(a)})}function ob(a,b,c){pb(a,b,c,null)||Qa(na(b,a))}function qb(a){return new t(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,m;k<a.length;k++)m=a[k],ob(m,na(f,k),h);else b(e)})}function v(){var a,b,c=new t(function(c,e){a=c;b=e});return new rb(c,a,b)}
t.prototype.then=function(a,b,c){return tb(this,fa(a)?a:null,fa(b)?b:null,c)};t.prototype.then=t.prototype.then;t.prototype.$goog_Thenable=!0;t.prototype.tb=function(a,b){return tb(this,null,a,b)};function ub(a,b){a.b||a.a!=ib&&a.a!=jb||vb(a);a.c?a.c.next=b:a.b=b;a.c=b}
function tb(a,b,c,d){var e=mb(null,null,null);e.a=new t(function(a,h){e.c=b?function(c){try{var e=b.call(d,c);a(e)}catch(z){h(z)}}:a;e.b=c?function(b){try{var e=c.call(d,b);!n(e)&&b instanceof wb?h(b):a(e)}catch(z){h(z)}}:h});e.a.f=a;ub(a,e);return e.a}t.prototype.C=function(a){this.a=gb;hb(this,ib,a)};t.prototype.O=function(a){this.a=gb;hb(this,jb,a)};
function hb(a,b,c){a.a==gb&&(a==c&&(b=jb,c=new TypeError("Promise cannot resolve to itself")),a.a=1,pb(c,a.C,a.O,a)||(a.j=c,a.a=b,a.f=null,vb(a),b!=jb||c instanceof wb||xb(a,c)))}function pb(a,b,c,d){if(a instanceof t)return ub(a,mb(b||aa,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(fa(f))return yb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function yb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(m){f(m)}}function vb(a){a.h||(a.h=!0,Qa(a.s,a))}function zb(a){var b=null;a.b&&(b=a.b,a.b=b.next,b.next=null);a.b||(a.c=null);return b}
t.prototype.s=function(){for(var a=null;a=zb(this);){var b=this.a,c=this.j;if(b==jb&&a.b&&!a.f)for(var d=void 0,d=this;d&&d.g;d=d.f)d.g=!1;if(a.a)a.a.f=null,Ab(a,b,c);else try{a.f?a.c.call(a.context):Ab(a,b,c)}catch(e){Bb.call(null,e)}lb.put(a)}this.h=!1};function Ab(a,b,c){b==ib?a.c.call(a.context,c):a.b&&a.b.call(a.context,c)}function xb(a,b){a.g=!0;Qa(function(){a.g&&Bb.call(null,b)})}var Bb=Ia;function wb(a){oa.call(this,a)}q(wb,oa);wb.prototype.name="cancel";
function rb(a,b,c){this.a=a;this.resolve=b;this.b=c};function Cb(a,b){this.a={};this.i=[];this.c=this.b=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){if(a instanceof Cb)d=Db(a),c=a.Z();else{var c=[],e=0;for(d in a)c[e++]=d;d=c;c=Fa(a)}for(e=0;e<d.length;e++)this.set(d[e],c[e])}}g=Cb.prototype;g.Oa=function(){return this.b};g.Z=function(){Gb(this);for(var a=[],b=0;b<this.i.length;b++)a.push(this.a[this.i[b]]);return a};
function Db(a){Gb(a);return a.i.concat()}g.$a=function(){return 0==this.b};g.clear=function(){this.a={};this.c=this.b=this.i.length=0};g.remove=function(a){return Hb(this.a,a)?(delete this.a[a],this.b--,this.c++,this.i.length>2*this.b&&Gb(this),!0):!1};function Gb(a){if(a.b!=a.i.length){for(var b=0,c=0;b<a.i.length;){var d=a.i[b];Hb(a.a,d)&&(a.i[c++]=d);b++}a.i.length=c}if(a.b!=a.i.length){for(var e={},c=b=0;b<a.i.length;)d=a.i[b],Hb(e,d)||(a.i[c++]=d,e[d]=1),b++;a.i.length=c}}
g.get=function(a,b){return Hb(this.a,a)?this.a[a]:b};g.set=function(a,b){Hb(this.a,a)||(this.b++,this.i.push(a),this.c++);this.a[a]=b};g.forEach=function(a,b){for(var c=Db(this),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};g.clone=function(){return new Cb(this)};g.Na=function(a){Gb(this);var b=0,c=this.c,d=this,e=new bb;e.next=function(){if(c!=d.c)throw Error("The map has changed since the iterator was created");if(b>=d.i.length)throw ab;var e=d.i[b++];return a?e:d.a[e]};return e};
function Hb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Ib(a){if(a.Z&&"function"==typeof a.Z)return a.Z();if(ea(a))return a.split("");if(da(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Fa(a)};function Jb(a){this.a=new Cb;if(a){a=Ib(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])}}function Kb(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ha(a):b.substr(0,1)+a}g=Jb.prototype;g.Oa=function(){return this.a.Oa()};g.add=function(a){this.a.set(Kb(a),a)};g.remove=function(a){return this.a.remove(Kb(a))};g.clear=function(){this.a.clear()};g.$a=function(){return this.a.$a()};g.contains=function(a){a=Kb(a);return Hb(this.a.a,a)};g.Z=function(){return this.a.Z()};g.clone=function(){return new Jb(this)};
g.Na=function(){return this.a.Na(!1)};var Lb=Ga(),Mb=r("Trident")||r("MSIE"),Nb=r("Edge"),Ob=r("Gecko")&&!(-1!=Ca.toLowerCase().indexOf("webkit")&&!r("Edge"))&&!(r("Trident")||r("MSIE"))&&!r("Edge"),Pb=-1!=Ca.toLowerCase().indexOf("webkit")&&!r("Edge");function Qb(){var a=Ca;if(Ob)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Nb)return/Edge\/([\d\.]+)/.exec(a);if(Mb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Pb)return/WebKit\/(\S+)/.exec(a)}
var ra=function(){if(Lb&&l.opera){var a;var b=l.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=Qb())&&(a=b?b[1]:"");return Mb&&(b=(b=l.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a}(),Rb={};var Sb=fb()||r("iPod"),Tb=r("iPad"),Ub=Ha(),Vb=r("Safari")&&!(Ha()||r("Coast")||Ga()||r("Edge")||r("Silk")||r("Android"))&&!(fb()||r("iPad")||r("iPod"));
var Wb={};p("lf.ConstraintAction",Wb);Wb.RESTRICT=0;Wb.CASCADE=1;var Xb={};p("lf.ConstraintTiming",Xb);Xb.IMMEDIATE=0;Xb.DEFERRABLE=1;var Yb={};p("lf.Order",Yb);Yb.DESC=0;Yb.ASC=1;var Zb={};p("lf.Type",Zb);Zb.ARRAY_BUFFER=0;Zb.BOOLEAN=1;Zb.DATE_TIME=2;Zb.INTEGER=3;Zb.NUMBER=4;Zb.STRING=5;Zb.OBJECT=6;var $b={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};p("lf.type.DEFAULT_VALUES",$b);var ac={};p("lf.schema.DataStoreType",ac);ac.INDEXED_DB=0;ac.MEMORY=1;ac.LOCAL_STORAGE=2;ac.FIREBASE=3;ac.WEB_SQL=4;ac.OBSERVABLE_STORE=5;function bc(a,b,c,d){this.b=a;this.name=b;this.Ra=c;this.a=d}bc.prototype.o=function(){return this.b+"."+this.name};function cc(a){return a.a.some(function(a){return a.S.Ia()})}function w(a,b,c,d){this.D=a;this.a=c;this.s=b;this.c=d;this.ja=null}p("lf.schema.Table",w);w.prototype.getName=function(){return this.D};w.prototype.getName=w.prototype.getName;
function dc(a){return a.ja||a.D}w.prototype.u=function(a){var b=new this.constructor(this.D);b.ja=a;b.Tb=this.Tb;return b};w.prototype.as=w.prototype.u;w.prototype.createRow=w.prototype.f;w.prototype.deserializeRow=w.prototype.b;w.prototype.C=function(){return this.a};w.prototype.getIndices=w.prototype.C;w.prototype.pa=function(){return this.s};w.prototype.getColumns=w.prototype.pa;w.prototype.getConstraint=w.prototype.g;w.prototype.h=function(){return this.c};w.prototype.persistentIndex=w.prototype.h;
function ec(a){return a.D+".#"};function x(a,b){this.ra=a;this.Ea=b;this.ja=null}g=x.prototype;g.getName=function(){return this.Ea+"("+this.ra.getName()+")"};g.o=function(){return this.Ea+"("+this.ra.o()+")"};g.X=function(){return this.ra.X()};g.toString=function(){return this.o()};g.G=function(){return this.ra.G()};g.Ka=function(){return this.ja};g.mb=function(){return[]};g.da=function(){return null};g.Ia=function(){return!1};g.Ob=function(a){this.ja=a;return this};x.prototype.as=x.prototype.Ob;
function gc(a){for(var b=[a];a instanceof x;)b.push(a.ra),a=a.ra;return b}function hc(a){this.ja=a||null;this.a=new w("#UnknownTable",[],[],!1)}g=hc.prototype;g.getName=function(){return"*"};g.o=function(){return this.getName()};g.toString=function(){return this.o()};g.X=function(){return this.a};g.G=function(){return 4};g.Ka=function(){return this.ja};g.mb=function(){return[]};g.da=function(){return null};g.Ia=function(){return!1};function ic(a,b){this.$=a;this.w=b||this.xb()}var jc=0;g=ic.prototype;g.id=function(){return this.$};g.xb=function(){return{}};g.Fb=function(){return this.w};g.ga=function(){return{id:this.$,value:this.Fb()}};g.qa=function(a){return"#"==a.substr(-1)?this.$:null};function kc(a){return new ic(a.id,a.value)}function lc(a){return new ic(jc++,a||{})}function mc(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};
function y(a,b,c,d,e){this.j=a;this.h=b;this.C=c;this.f=d;this.b=e}p("lf.TransactionStats",y);y.prototype.s=function(){return this.j};y.prototype.success=y.prototype.s;y.prototype.g=function(){return this.h};y.prototype.insertedRowCount=y.prototype.g;y.prototype.u=function(){return this.C};y.prototype.updatedRowCount=y.prototype.u;y.prototype.c=function(){return this.f};y.prototype.deletedRowCount=y.prototype.c;y.prototype.a=function(){return this.b};y.prototype.changedTableCount=y.prototype.a;var nc={};p("lf.TransactionType",nc);nc.READ_ONLY=0;nc.READ_WRITE=1;function oc(){this.a=Vb||Tb||Sb;this.b=!(this.a||Mb&&!Rb[10]&&!(Rb[10]=0<=qa(10)));!Mb||Rb[11]||(Rb[11]=0<=qa(11));this.g=Ub||Vb;this.c=n(window.Map)&&n(window.Map.prototype.values)&&n(window.Map.prototype.forEach)&&!this.a;this.f=n(window.Set)&&n(window.Set.prototype.values)&&n(window.Set.prototype.forEach)&&!this.a}var pc;function qc(){n(pc)||(pc=new oc);return pc};function A(){this.a=new Cb;Object.defineProperty(this,"size",{get:function(){return this.a.Oa()}})}A.prototype.clear=function(){this.a.clear()};A.prototype.clear=A.prototype.clear;A.prototype.delete=function(a){return this.a.remove(a)};A.prototype["delete"]=A.prototype.delete;A.prototype.forEach=function(a,b){return this.a.forEach(a,b)};A.prototype.forEach=A.prototype.forEach;A.prototype.get=function(a){return this.a.get(a)};A.prototype.get=A.prototype.get;
A.prototype.has=function(a){return Hb(this.a.a,a)};A.prototype.has=A.prototype.has;A.prototype.set=function(a,b){return this.a.set(a,b)};A.prototype.set=A.prototype.set;var rc=qc().c;function B(){return rc?new window.Map:new A}function sc(a){if(a instanceof A)return Db(a.a);var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function C(a){if(a instanceof A)return a.a.Z();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};function tc(a,b){this.h=a;this.b=b||null;this.J=v();this.s=!1;this.g=null}tc.prototype.V=function(){return(0==this.h?this.f():uc(this)).then(function(a){this.s=!0;return a}.bind(this))};function uc(a){try{vc(a.b)}catch(b){return nb(b)}return wc(a).then(function(a){this.b.V();return a}.bind(a))}function wc(a){xc(a);yc(a);return a.f()}
function xc(a){a.b.b.forEach(function(a,c){var d=this.b.f.get(c),d=this.a(d.getName(),d.b.bind(d),0),e=C(a.ca).map(function(a){return a.id()});0<e.length&&d.remove(e).tb(this.j,this);e=C(a.Y).map(function(a){return a[1]}).concat(C(a.ba));d.put(e).tb(this.j,this)},a)}function yc(a){zc(a.b).forEach(function(a){var c=this.a(a.getName(),kc,1);c.remove([]);c.put(a.ga())},a)}tc.prototype.j=function(a){this.J.b(a)};
function Ac(a){if(null===a.g)if(a.s)if(0==a.h)a.g=new y(!0,0,0,0,0);else{var b=0,c=0,d=0,e=0;a.b.b.forEach(function(a){e++;b+=a.ba.size;d+=a.Y.size;c+=a.ca.size});a.g=new y(!0,b,d,c,e)}else a.g=new y(!1,0,0,0,0);return a.g};function Bc(a){this.a=new Jb(a);Object.defineProperty(this,"size",{get:function(){return this.a.Oa()}})}Bc.prototype.add=function(a){this.a.add(a)};Bc.prototype.add=Bc.prototype.add;Bc.prototype.clear=function(){this.a.clear()};Bc.prototype.clear=Bc.prototype.clear;Bc.prototype.delete=function(a){return this.a.remove(a)};Bc.prototype["delete"]=Bc.prototype.delete;Bc.prototype.forEach=function(a,b){this.a.Z().forEach(a,b)};Bc.prototype.has=function(a){return this.a.contains(a)};Bc.prototype.has=Bc.prototype.has;
var Cc=qc().f;function D(a){return Cc?n(a)?new window.Set(a):new window.Set:new Bc(a)}function E(a){if(a instanceof Bc)return a.a.Z();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function Dc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function Ec(a,b){this.$=a;this.za=b||{}}function Fc(a){var b=D();a.forEach(function(a){b.add(a>>9)});return E(b)}Ec.prototype.N=function(){return this.$};function Gc(a,b){b.forEach(function(a){this.za[a.id()]=a.ga()},a)}function Hc(a,b){b.forEach(function(a){delete this.za[a]},a)}Ec.prototype.ga=function(){return{id:this.$,value:JSON.stringify(this.za)}};function Ic(a){return new Ec(a.id,JSON.parse(a.value))};function Jc(a){this.a=a}Jc.prototype.toString=function(){return this.a};var Kc=new Jc("backstore"),Lc=new Jc("cache"),Mc=new Jc("indexstore"),Nc=new Jc("engine"),Oc=new Jc("runner"),Pc=new Jc("observerregistry"),F=new Jc("schema");function Qc(a,b,c){this.a=a;this.b=b;this.c=c}Qc.prototype.get=function(a){if(0==a.length)return Rc(this);var b=this.b;return Sc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.za[a])})})};function Sc(a,b){var c=B(),d=v(),e=Fc(b).map(function(a){return new t(function(b,d){var e;try{e=this.a.get(a)}catch(z){d(z);return}e.onerror=d;e.onsuccess=function(a){a=Ic(a.target.result);c.set(a.N(),a);b()}},this)},a);qb(e).then(function(){d.resolve(c)});return d.a}
function Rc(a){return new t(function(a,c){var d=[],e;try{e=this.a.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var c=e.result;if(c){var h;h=Ic(c.value).za;for(var k in h)d.push(this.b(h[k]));c.continue()}else a(d)}.bind(this)},a)}function Tc(a,b){return new t(function(a,d){var e;try{e=b()}catch(f){d(f);return}e.onsuccess=a;e.onerror=d},a)}
Qc.prototype.put=function(a){if(0==a.length)return u();var b=B();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.c(this.a.name,d));Gc(e,[a]);b.set(d,e)},this);a=C(b).map(function(a){return Tc(this,function(){return this.a.put(a.ga())}.bind(this))},this);return qb(a)};
Qc.prototype.remove=function(a){if(0==a.length)return Tc(this,function(){return this.a.clear()}.bind(this));var b=B();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.c(this.a.name,d));Hc(e,[a]);b.set(d,e)},this);a=C(b).map(function(a){return Tc(this,function(){return 0==Object.keys(a.za).length?this.a.delete(a.N()):this.a.put(a.ga())}.bind(this))},this);return qb(a)};function Uc(a,b,c){a=a.a(Lc);var d=[c<<9,(c+1<<9)-1];b=Vc(a,b,d[0],d[1]);c=new Ec(c);Gc(c,b);return c}
function Wc(a,b){return new Ec(b)};function Xc(a){this.a=a.a(Lc);this.b=a.a(Mc);this.m=a.a(F)}function Zc(a,b){b.forEach(function(a){$c(this,a);ad(this,a)},a)}function ad(a,b){var c=b.getName();b.ca.forEach(function(a,b){this.a.remove(c,b)},a);b.ba.forEach(function(a){this.a.set(c,a)},a);b.Y.forEach(function(a){this.a.set(c,a[1])},a)}function $c(a,b){var c=a.m.table(b.getName());bd(b).forEach(function(a){cd(this,c,a)},a)}
function cd(a,b,c){var d=a.b.a.get(b.getName())||[],e=0;d.forEach(function(a){try{dd(a,c),e++}catch(b){throw d.slice(0,e).forEach(function(a){dd(a,[c[1],c[0]])},this),b;}},a)}function dd(a,b){var c=null===b[1]?void 0:b[1].qa(a.getName()),d=null===b[0]?void 0:b[0].qa(a.getName());if(!n(d)&&n(c))a.add(c,b[1].id());else if(n(d)&&n(c)){if(null===c||null===d){if(c==d)return}else if(0==a.oa().Ma(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else n(d)&&!n(c)&&a.remove(d,b[0].id())};function G(a,b){this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}q(G,Error);function ed(){this.a=B();this.size=0}g=ed.prototype;g.has=function(a){return this.a.has(a)};g.set=function(a,b){var c=this.a.get(a)||null;null===c&&(c=D(),this.a.set(a,c));c.has(b)||(c.add(b),this.size++);return this};function fd(a,b,c){var d=a.a.get(b)||null;null===d&&(d=D(),a.a.set(b,d));c.forEach(function(a){d.has(a)||(d.add(a),this.size++)},a)}function gd(a,b){sc(b.a).forEach(function(a){var d=b.get(a);fd(this,a,d)},a)}
g.delete=function(a,b){var c=this.a.get(a)||null;if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.a.delete(a));return d};g.get=function(a){a=this.a.get(a)||null;return null===a?null:E(a)};g.clear=function(){this.a.clear();this.size=0};g.values=function(){var a=[];this.a.forEach(function(b){a.push.apply(a,E(b))});return a};function hd(a){this.b=a.a(Mc);this.m=a.a(F);this.c=a.a(Lc);this.a=null}function id(a,b,c){var d=b.Fa.g;c.forEach(function(a){d.forEach(function(b){if(null==a.w[b.getName()])throw new G(202,b.o());},this)},a)}function jd(a,b,c,d){b.Fa.b.forEach(function(a){a.a==d&&kd(this,a,c)},a)}function kd(a,b,c){var d=ld(a,b);c.forEach(function(a){if(md(a[0],a[1],b.name)&&(a=a[1].qa(b.name),null!==a&&!d.La(a)))throw new G(203,b.name);},a)}
function ld(a,b){null===a.a&&(a.a=B());var c=a.a.get(b.name)||null;null===c&&(c=a.m.table(b.ka)[b.b].da(),c=a.b.get(c.o()),a.a.set(b.name,c));return c}function md(a,b,c){return(null===a?null!==b:null===b)||a.qa(c)!=b.qa(c)}function nd(a,b,c,d){b=od(pd(a.m),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.a==d}),0!=b.length&&qd(a,b,c,function(a,b,c){if(b.La(c))throw new G(203,a.name);}))}
function rd(a,b,c){b=od(pd(a.m),b.getName(),1);if(null===b)return null;var d=new ed;qd(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&fd(d,a.f,b)});return d}function sd(a,b,c){var d=new ed;qd(a,c,b,function(a,b,c,k){b.get(c).forEach(function(b){d.set(b,{ib:a,Rb:k[1]})})});return d}function qd(a,b,c,d){b.forEach(function(a){var b=this.b.get(a.name),h=ld(this,a);c.forEach(function(c){if(md(c[0],c[1],h.getName())){var m=c[0].qa(h.getName());d(a,b,m,c)}},this)},a)}
function td(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),jd(a,b,c,d))}function ud(a,b,c,d){0!=c.length&&(jd(a,b,c,d),nd(a,b,c,d))}function vd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),nd(a,b,c,d))}
function wd(a,b,c){var d={sb:[],Db:new ed},e=new ed;fd(e,b.getName(),c.map(function(a){return a.id()}));do{var f=new ed;sc(e.a).forEach(function(a){var b=this.m.table(a);a=e.get(a).map(function(a){return[this.c.get(a),null]},this);b=rd(this,b,a);null!==b&&(d.sb.unshift.apply(d.sb,sc(b.a)),gd(f,b))},a);e=f;gd(d.Db,e)}while(0<e.size);return d};function xd(a){this.ba=B();this.Y=B();this.ca=B();this.D=a}g=xd.prototype;g.getName=function(){return this.D};g.add=function(a){if(this.ca.has(a.id())){var b=[this.ca.get(a.id()),a];this.Y.set(a.id(),b);this.ca.delete(a.id())}else this.ba.set(a.id(),a)};g.modify=function(a){var b=a[1],c=a[0].id();this.ba.has(c)?this.ba.set(c,b):this.Y.has(c)?(a=[this.Y.get(a[0].id())[0],b],this.Y.set(c,a)):this.Y.set(c,a)};
g.delete=function(a){if(this.ba.has(a.id()))this.ba.delete(a.id());else if(this.Y.has(a.id())){var b=this.Y.get(a.id())[0];this.Y.delete(a.id());this.ca.set(a.id(),b)}else this.ca.set(a.id(),a)};function bd(a){var b=[];a.ba.forEach(function(a){b.push([null,a])});a.Y.forEach(function(a){b.push(a)});a.ca.forEach(function(a){b.push([a,null])});return b}g.toString=function(){return"["+sc(this.ba).toString()+"], ["+sc(this.Y).toString()+"], ["+sc(this.ca).toString()+"]"};
function yd(a){var b=new xd(a.D);a.ba.forEach(function(a){b.delete(a)});a.ca.forEach(function(a){b.add(a)});a.Y.forEach(function(a){b.modify([a[1],a[0]])});return b}g.$a=function(){return 0==this.ba.size&&0==this.ca.size&&0==this.Y.size};function zd(a,b){this.f=B();b.forEach(function(a){this.f.set(a.getName(),a)},this);this.m=a.a(F);this.c=a.a(Lc);this.h=a.a(Mc);this.a=new hd(a);this.g=new Xc(a);this.b=B()}function zc(a){var b=[];sc(a.b).map(function(a){return this.f.get(a)},a).forEach(function(a){a.c&&(a.a.forEach(function(a){b.push(this.h.get(a.o()))},this),b.push(this.h.get(a.getName()+".#")))},a);return b}
function Ad(a,b,c){var d=b.getName(),e=a.b.get(d)||new xd(d);a.b.set(d,e);try{cd(a.g,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.c.set(d,f),e.add(f)):null!==b&&null!==f?(a.c.set(d,f),e.modify(c)):null!==b&&null===f&&(a.c.remove(d,b.id()),e.delete(b))}function Bd(a,b,c){Cd(a,b);id(a.a,b,c);c=c.map(function(a){return[this.c.get(a.id()),a]},a);Dd(a,b,c);ud(a.a,b,c,0);c.forEach(function(a){Ad(this,b,a)},a)}
zd.prototype.remove=function(a,b){Cd(this,a);Ed(this,a,b);vd(this.a,a,b,0);for(var c=0;c<b.length;c++)Ad(this,a,[b[c],null])};function Dd(a,b,c){b=od(pd(a.m),b.getName(),1);if(null!==b){var d=sd(a.a,c,b);sc(d.a).forEach(function(a){d.get(a).forEach(function(b){var c=this.m.table(b.ib.f),d=this.c.get(a),m=c.b(d.ga());m.w[b.ib.ua]=b.Rb.w[b.ib.b];Ad(this,c,[d,m])},this)},a)}}
function Ed(a,b,c){if(null!==od(pd(a.m),b.getName(),1)){b=wd(a.a,b,c);var d=b.Db;b.sb.forEach(function(a){var b=this.m.table(a);a=d.get(a).map(function(a){return this.c.get(a)},this);vd(this.a,b,a,0);a.forEach(function(a){Ad(this,b,[a,null])},this)},a)}}function vc(a){a.b.forEach(function(a){var c=this.f.get(a.getName());td(this.a,c,C(a.ba),1);vd(this.a,c,C(a.ca),1);ud(this.a,c,C(a.Y),1)},a)}zd.prototype.V=function(){};function Fd(a){var b=C(a.b).map(function(a){return yd(a)});Zc(a.g,b)}
function Cd(a,b){if(!a.f.has(b.getName()))throw new G(106,b.getName());};function Gd(a,b){this.a=a;this.b=b}Gd.prototype.la=function(){return this.a};function Hd(a){var b=D();a.forEach(function(a){a.b.forEach(b.add.bind(b))});return b};p("lf.bind",function(a){return new Id(a)});function Id(a){this.a=a}p("lf.Binder",Id);Id.prototype.da=function(){return this.a};function Jd(){this.b=Kd();var a=Ld();this.a=B();this.a.set(1,Md());this.a.set(2,Nd());this.a.set(4,a);this.a.set(3,a);this.a.set(5,Od())}var Pd;function Qd(){null!=Pd||(Pd=new Jd);return Pd}function Rd(a,b,c){return(a.a.get(b)||null).get(c)||null}function Kd(){function a(a){return a}var b=B();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function Md(){var a=B();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Ld(){var a=Md();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Od(){var a=Ld();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function Nd(){var a=B();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function H(a,b,c,d){this.l=a;this.A=b;this.U=this.l==I?!1:c;this.W=this.A==I?!1:d}var I=new function(){};H.prototype.toString=function(){return(this.U?"(":"[")+(this.l==I?"unbound":this.l)+", "+(this.A==I?"unbound":this.A)+(this.W?")":"]")};function Sd(a){if(Td(a))return[];var b=null,c=null;a.l==I||(b=new H(I,a.l,!1,!a.U));a.A==I||(c=new H(a.A,I,!a.W,!1));return[b,c].filter(function(a){return null!==a})}H.prototype.reverse=function(){return new H(this.A,this.l,this.W,this.U)};
function Ud(a,b){var c=Vd(a.l,b.l,!0,a.U,b.U);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return d.A==I||d.A>c.l||d.A==c.l&&!d.W&&!c.U}function Wd(){return new H(I,I,!1,!1)}function Td(a){return a.l==I&&a.A==I}function Xd(a){return a.l==a.A&&a.l!=I&&!a.U&&!a.W}H.prototype.contains=function(a){var b=this.A==I||a<this.A||a==this.A&&!this.W;return(this.l==I||a>this.l||a==this.l&&!this.U)&&b};
function Vd(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==I?b==I?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==I?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function Yd(a,b){var c=Vd(a.l,b.l,!0,a.U,b.U);0==c&&(c=Vd(a.A,b.A,!1,a.W,b.W));return c}function Zd(a){if(0==a.length)return[];a.sort(Yd);for(var b=Array(a.length+1),c=0;c<b.length;c++)b[c]=0==c?new H(I,a[c].l,!1,!0):c==b.length-1?new H(a[c-1].A,I,!0,!1):new H(a[c-1].A,a[c].l,!0,!0);return b};function $d(a){this.a=[];n(a)&&this.add(a)}$d.prototype.toString=function(){return this.a.map(function(a){return a.toString()}).join(",")};$d.prototype.Z=function(){return this.a};
$d.prototype.add=function(a){if(0!=a.length)if(a=this.a.concat(a),1==a.length)this.a=a;else{a.sort(Yd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(Ud(c,a[d])){var e=a[d],f=Wd();if(c.l!=I&&e.l!=I){var h=Vd(c.l,e.l,!0);1!=h?(f.l=c.l,f.U=0!=h?c.U:c.U&&e.U):(f.l=e.l,f.U=e.U)}c.A!=I&&e.A!=I&&(h=Vd(c.A,e.A,!1),-1!=h?(f.A=c.A,f.W=0!=h?c.W:c.W&&e.W):(f.A=e.A,f.W=e.W));c=f}else b.push(c),c=a[d];b.push(c);this.a=b}};
function ae(a,b){var c=[];a.Z().map(function(a){return b.Z().map(function(b){var c;if(Ud(a,b)){c=Wd();var h=Vd(a.l,b.l,!0),h=0==h?a.U?a:b:-1!=h?a:b;c.l=h.l;c.U=h.U;a.A==I||b.A==I?b=a.A==I?b:a:(h=Vd(a.A,b.A,!1),b=0==h?a.W?a:b:-1==h?a:b);c.A=b.A;c.W=b.W}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new $d(c.filter(function(a){return null!==a}))};function J(){this.g=this.f=null}var be=[];J.prototype.la=function(){for(var a=this;null!==a.f;)a=a.f;return a};function ce(a){for(var b=0;null!==a.f;)b++,a=a.f;return b}function K(a){return a.g||be}function de(a,b){return K(a)[b]||null}function ee(a,b,c){b.f=a;null===a.g?a.g=[b]:a.g.splice(c,0,b)}function L(a,b){b.f=a;null===a.g?a.g=[b]:a.g.push(b)}function fe(a,b){var c=a.g&&a.g[b];return c?(c.f=null,a.g.splice(b,1),0==a.g.length&&(a.g=null),c):null}
J.prototype.removeChild=function(a){return fe(this,K(this).indexOf(a))};function ge(a,b,c){de(a,c).f=null;b.f=a;a.g[c]=b}function he(a,b,c){!1!==b.call(c,a)&&K(a).forEach(function(a){he(a,b,c)})};function ie(){J.call(this);this.$=je++}q(ie,J);var je=0;ie.prototype.N=function(){return this.$};function M(a,b){this.entries=a;this.b=D(b);this.a=null}M.prototype.B=function(){return E(this.b)};function ke(a){return a.entries.map(function(a){return a.aa.w})}function le(a){return a.entries.map(function(a){return a.aa.id()})}function me(a,b){return a.a.get(b.o())}var ne=null;function oe(){null===ne&&(ne=new M([],[]));return ne}
function pe(a){if(0==a.length)return oe();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=B();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=B(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new M(C(e),E(a[0].b))}function qe(a){if(0==a.length)return oe();var b=B();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new M(C(b),E(a[0].b))}
function se(a,b){var c=1<b.length,d=a.map(function(a){return new te(a,c)});return new M(d,b)}function te(a,b){this.aa=a;this.id=ue++;this.kb=b}var ue=0;function N(a,b){var c=b.Ka();return null!==c&&a.aa.w.hasOwnProperty(c)?a.aa.w[c]:a.kb?a.aa.w[dc(b.X())][b.getName()]:a.aa.w[b.getName()]}function ve(a,b,c){var d=b.Ka();if(null!=d)a.aa.w[d]=c;else if(a.kb){var d=dc(b.X()),e=a.aa.w[d];null==e&&(e={},a.aa.w[d]=e);e[b.getName()]=c}else a.aa.w[b.getName()]=c}
function we(a,b,c,d){function e(a,b){if(a.kb){var c=a.aa.w,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.aa.w}var f={};e(a,b);e(c,d);a=new ic(-1,f);return new te(a,!0)};function xe(a,b,c){ie.call(this);this.F=a;this.value=b;this.a=c;this.h=Rd(Qd(),this.F.G(),this.a);this.b=!1;this.c=b}q(xe,ie);g=xe.prototype;g.Ga=function(){var a=new xe(this.F,this.value,this.a);a.c=this.c;a.eb(this.b);var b=this.N();a.$=b;return a};g.pa=function(a){return null!=a?(a.push(this.F),a):[this.F]};g.B=function(a){a=null!=a?a:D();a.add(this.F.X());return a};g.eb=function(a){this.b=a};
function ye(a){var b=!1;a.value instanceof Id||(b="array"==ba(a.value)?!a.value.some(function(a){return a instanceof Id}):!0);if(!b)throw new G(501);}g.ab=function(a){ye(this);if("in"==this.a)return ze(this,a);var b=a.entries.filter(function(a){return this.h(N(a,this.F),this.value)!=this.b},this);return new M(b,a.B())};
g.bind=function(a){if(this.c instanceof Id){var b=this.c.da();if(a.length<=b)throw new G(510);this.value=a[b]}else"array"==ba(this.c)&&(this.value=this.c.map(function(b){if(b instanceof Id){var d=b.da();if(a.length<=d)throw new G(510);return a[b.da()]}return b}))};function ze(a,b){var c=D(a.value),d=function(a){return null===a?!1:c.has(a)!=this.b}.bind(a),e=b.entries.filter(function(a){return d(N(a,this.F))},a);return new M(e,b.B())}
g.toString=function(){return"value_pred("+this.F.o()+" "+this.a+(this.b?"(complement)":"")+" "+this.value+")"};function Ae(a){ye(a);return null!==a.value&&("between"==a.a||"in"==a.a||"eq"==a.a||"gt"==a.a||"gte"==a.a||"lt"==a.a||"lte"==a.a)}
g.ub=function(){var a=null;if("between"==this.a)a=new H(Be(this,this.value[0]),Be(this,this.value[1]),!1,!1);else{if("in"==this.a)return a=this.value.map(function(a){return new H(a,a,!1,!1)}),new $d(this.b?Zd(a):a);a=Be(this,this.value);a="eq"==this.a?new H(a,a,!1,!1):"gte"==this.a?new H(a,I,!1,!1):"gt"==this.a?new H(a,I,!0,!1):"lte"==this.a?new H(I,a,!1,!1):new H(I,a,!1,!0)}return new $d(this.b?Sd(a):[a])};function Be(a,b){return 2==a.F.G()?b.getTime():b};function Ce(a){this.S=a;this.C=this.M=null}function De(a,b){null===a.M&&null!=a.H&&(a.M=Ee(a.H));return a.M.get(b)||null}function Ee(a){var b=B();he(a,function(a){b.set(a.N(),a)});return b}function Fe(a,b){b.H&&(a.H=b.H.Ga());a.C=b}Ce.prototype.bind=function(){return this};function Ge(a,b){var c=a.H;null!=c&&he(c,function(a){a instanceof xe&&a.bind(b)})};function He(a){Ce.call(this,a)}q(He,Ce);function Ie(a){var b="";a.forEach(function(c,d){b+=c.F.o()+" ";b+=1==c.ta?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}He.prototype.O=function(){return D(this.l)};He.prototype.clone=function(){var a=new He(this.S);Fe(a,this);this.a&&(a.a=this.a.slice());this.l&&(a.l=this.l.slice());a.K=this.K;a.I=this.I;this.b&&(a.b=this.b.slice());this.c&&(a.c=this.c.slice());this.h&&(a.h=this.h);this.j&&(a.j=this.j);a.g=this.g;return a};
He.prototype.bind=function(a){He.na.bind.call(this,a);null!=this.h&&(this.K=a[this.h.da()]);null!=this.j&&(this.I=a[this.j.da()]);Ge(this,a);return this};function Je(a,b){this.g=a;this.s=a.a(Kc);this.a=b.map(function(a){return a.context});this.j=b.map(function(a){return a.pb});this.b=Hd(this.j);this.f=Ke(this);this.u=v()}function Ke(a){return a.a.some(function(a){return!(a instanceof He)})?1:0}g=Je.prototype;
g.exec=function(){function a(){var f=d.shift();return f?f.la().exec(b,e[c.length]).then(function(b){c.push(b[0]);return a()}):u()}var b=0==this.f?void 0:new zd(this.g,this.b),c=[],d=this.j.slice(),e=this.a;return a().then(function(){this.c=this.s.Ba(this.f,E(this.b),b);return this.c.V()}.bind(this)).then(function(){this.ob(c);return c}.bind(this),function(a){null!=b&&Fd(b);throw a;})};g.G=function(){return this.f};g.sa=function(){return this.b};g.Ha=function(){return this.u};g.N=function(){return ha(this)};
g.ob=function(){};g.Cb=function(){var a=null;null!=this.c&&(a=Ac(this.c));return null===a?new y(!1,0,0,0,0):a};function Le(a,b){Je.call(this,a,b);this.h=a.a(Pc)}q(Le,Je);Le.prototype.Aa=function(){return 0};Le.prototype.ob=function(a){this.a.forEach(function(b,c){Me(this.h,b,a[c])},this)};function Ne(a,b){this.c=a;this.g=a.a(Pc);this.j=a.a(Oc);this.f=new Xc(a);this.b=b;var c=a.a(F),d=this.b.map(function(a){return c.table(a.getName())});this.a=D(d);this.h=v()}g=Ne.prototype;g.exec=function(){Zc(this.f,this.b);var a=Oe(this.g,this.a);0!=a.length&&(a=new Le(this.c,a),Pe(this.j,a));return u()};g.G=function(){return 1};g.sa=function(){return this.a};g.Ha=function(){return this.h};g.N=function(){return ha(this)};g.Aa=function(){return 1};function Qe(a){this.b=a;this.a=a.a(Kc);this.c=a.a(Oc)}Qe.prototype.f=function(a){a=new Ne(this.b,a);Pe(this.c,a)};function O(a,b){this.ia=a;this.a=b;this.b=B()}p("lf.backstore.FirebaseRawBackStore",O);O.prototype.C=function(){return this.a};O.prototype.O=function(){throw new G(351);};function Re(a,b){var c=v(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.b(a)});return c.a}function Se(a,b,c){function d(a){a?e.b(a):e.resolve()}c=c||!1;var e=v();c?a.set(b,d):a.update(b,d);return e.a}
function Te(a,b){return Re(a.a,"@rev/R").then(function(a){this.M=a;return Re(this.a,"@table")}.bind(a)).then(function(a){var d=0,e;for(e in a)this.b.set(e,a[e]),a[e]>d&&(d=a[e]);b.a().forEach(function(b){this.b.has(b.getName())||(a[b.getName()]=++d)},this);e=this.a.child("@table");return Se(e,a)}.bind(a))}
function Ue(a,b,c){var d=a.b.get(b);return null!=d?function(){var a={},b=v();this.a.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.a}.call(a).then(function(a){a["@rev"]={R:++this.M};return Se(this.a,a)}.bind(a)):u()}O.prototype.f=function(a){return Ue(this,a,function(){return null}).then(function(){this.b.delete(a);return Se(this.a.child("@table/"+a),null,!0)}.bind(this))};O.prototype.dropTable=O.prototype.f;
O.prototype.c=function(a,b,c){return Ue(this,a,function(a){var e=a.P;e[b]=c;return{R:this.M+1,T:a.T,P:e}}.bind(this))};O.prototype.addTableColumn=O.prototype.c;O.prototype.g=function(a,b){return Ue(this,a,function(a){var d=a.P;delete d[b];return{R:this.M+1,T:a.T,P:d}}.bind(this))};O.prototype.dropTableColumn=O.prototype.g;O.prototype.u=function(a,b,c){return Ue(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.M+1,T:a.T,P:e}}.bind(this))};O.prototype.renameTableColumn=O.prototype.u;
O.prototype.j=function(){throw new G(351);};O.prototype.createRow=O.prototype.j;O.prototype.h=function(){return this.ia};O.prototype.getVersion=O.prototype.h;function Ve(a,b){var c=v(),d=a.b.get(b);a.a.orderByChild("T").equalTo(d).once("value",function(a){var b=[];a.forEach(function(a){b.push(a.val().P)});c.resolve(b)});return c.a}O.prototype.s=function(){var a={},b=sc(this.b).map(function(b){return Ve(this,b).then(function(d){a[b]=d})}.bind(this));return qb(b).then(function(){return a})};
O.prototype.dump=O.prototype.s;function We(a,b,c){tc.call(this,b,c);this.c=a}q(We,tc);We.prototype.a=function(a){return this.c.Pa(a)};
We.prototype.f=function(){if(0==this.h)return this.J.resolve(),this.J.a;var a=this.b.b;if(0==a.size)this.J.resolve();else{var b=this.c.b+1;this.c.b=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.c.f.get(e);a.ba.forEach(function(a,d){c[d]={R:b,T:f,P:a.w}});a.Y.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].w}});a.ca.forEach(function(a,b){c[b]=null})},this);this.c.a.update(c,function(c){null===c?this.J.resolve():(this.c.b=b-1,c=C(a).map(function(a){return Xe(this.c,a.getName())},this),qb(c).then(this.J.b.bind(this.J),
this.J.b.bind(this.J)))}.bind(this))}return this.J.a};function Ye(){this.a=B()}function Ze(a,b){if(0==b.length)return C(a.a);var c=[];b.forEach(function(a){a=this.a.get(a)||null;null===a||c.push(a)},a);return c}Ye.prototype.getData=function(){return this.a};Ye.prototype.get=function(a){return u(Ze(this,a))};function $e(a,b){b.forEach(function(a){this.a.set(a.id(),a)},a)}Ye.prototype.put=function(a){$e(this,a);return u()};function af(a,b){0==b.length||b.length==a.a.size?a.a.clear():b.forEach(function(a){this.a.delete(a)},a)}
Ye.prototype.remove=function(a){af(this,a);return u()};function bf(a){return 0==a.a.size?0:sc(a.a).reduce(function(a,c){return a>c?a:c},0)};function cf(a,b){this.m=a;this.s=b;this.g=B();this.b=-1;this.c=B();this.f=B();this.j=null}g=cf.prototype;
g.Ja=function(a){this.a=this.s.child(this.m.name());var b=a||function(){return u()};return Re(this.a,"@db/version").then(function(a){return null===a?Se(this.a,df(this),!0).then(function(){var a=new O(0,this.a);return b(a)}.bind(this)).then(function(){return this.Ja()}.bind(this)):a==this.m.version()?Re(this.a,"@rev/R").then(function(a){this.b=a;return Re(this.a,"@table")}.bind(this)).then(function(a){for(var b in a)this.f.set(b,a[b]);a=this.m.a().map(function(a){return Xe(this,a.getName())},this);
return qb(a)}.bind(this)).then(function(){ef(this);ff(this);return u()}.bind(this)):gf(this,a,b).then(function(){return this.Ja()}.bind(this))}.bind(this))};function gf(a,b,c){var d=new O(b,a.a);return Te(d,a.m).then(function(){return u()}.bind(a)).then(function(){return c(d)}).then(function(){var a=this.a.child("@db");return Se(a,{version:this.m.version()},!0)}.bind(a))}
function ff(a){a.a.off();a.a.on("child_removed",a.Qb.bind(a));a.h&&(a.h.off(),a.g.clear());a.h=a.a.orderByChild("R").startAt(a.b+1);a.h.on("value",a.Nb.bind(a))}function ef(a){jc=C(a.c).map(function(a){return bf(a)}).reduce(function(a,c){return a>c?a:c},0)+1}g.Qb=function(a){var b=a.val(),c=this.g.get(b.T)||null;null===c&&(c=D(),this.g.set(b.T,c));c.add(parseInt(a.key(),10))};
g.Nb=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.b&&(this.b=b,a=hf(this,a),a.forEach(function(a){var b=this.c.get(a.getName()),e=sc(a.ca);0<e.length&&af(b,e);var f=C(a.ba);a.Y.forEach(function(a){f.push(a[1])});$e(b,f)},this),0<a.length&&this.Ua(a),ff(this))};
function hf(a,b){var c=D(),d=B();a.f.forEach(function(a,b){var h=this.c.get(b),k=new xd(b);if(this.g.has(a)){var m=E(this.g.get(a));m.forEach(function(a){c.add(a)});Ze(h,m).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){var h=a.val();a=d.get(h.T);var k=this.c.get(a.getName()),h=this.m.table(a.getName()).b({id:b,value:h.P});k.getData().has(b)?a.modify([Ze(k,[b])[0],h]):a.add(h)}}}.bind(a));return C(d).filter(function(a){return!a.$a()})}
function Xe(a,b){var c=v(),d=a.f.get(b),e=a.m.table(b);a.a.orderByChild("T").equalTo(d).once("value",function(a){var d=new Ye,k=[];a.forEach(function(a){k.push(e.b({id:parseInt(a.key(),10),value:a.val().P}))});$e(d,k);this.c.set(b,d);c.resolve()}.bind(a));return c.a}function df(a){var b={};b["@db"]={version:a.m.version()};b["@rev"]={R:1};a.b=1;b["@table"]={};a.m.a().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.c.set(e,new Ye);this.f.set(e,d)},a);return b}
g.Ba=function(a,b,c){return new We(this,a,c)};g.Pa=function(a){var b=this.c.get(a)||null;if(null!==b)return b;throw new G(101,a);};g.close=function(){};g.Sa=function(a){this.j=a};g.Ua=function(a){null!=this.j&&this.j(a)};function P(a,b,c,d){this.a=b;this.b=c;this.ia=a;this.M=d}p("lf.backstore.IndexedDBRawBackStore",P);P.prototype.C=function(){return this.a};P.prototype.getRawDBInstance=P.prototype.C;P.prototype.O=function(){return this.b};P.prototype.getRawTransaction=P.prototype.O;P.prototype.f=function(a){return new t(function(b,c){try{this.a.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};P.prototype.dropTable=P.prototype.f;
function jf(a,b,c,d){return new t(function(a,f){var h;try{var k=this.b.objectStore(b);h=k.openCursor()}catch(m){f(m);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function kf(a){var b=null;a instanceof ArrayBuffer?b=mc(a):a instanceof Date?b=a.getTime():b=a;return b}
function mf(a,b,c){function d(a){var b=Ic(a.value),d=b.za,e;for(e in d){var z=kc(d[e]);c(z);d[e]=z.ga()}a.update(b.ga())}function e(a){var b=kc(a.value);c(b);a.update(b.ga())}return jf(a,b,a.M?d:e,function(){})}P.prototype.c=function(a,b,c){var d=kf(c);return mf(this,a,function(a){a.w[b]=d})};P.prototype.addTableColumn=P.prototype.c;P.prototype.g=function(a,b){return mf(this,a,function(a){delete a.w[b]})};P.prototype.dropTableColumn=P.prototype.g;
P.prototype.u=function(a,b,c){return mf(this,a,function(a){a.w[c]=a.w[b];delete a.w[b]})};P.prototype.renameTableColumn=P.prototype.u;function nf(a,b){var c=[];return new t(function(a,e){var f;try{f=this.b.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.M){var e;e=Ic(b.value).za;for(var m in e)c.push(e[m])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}P.prototype.j=function(a){var b={},c;for(c in a)b[c]=kf(a[c]);return lc(b)};
P.prototype.createRow=P.prototype.j;P.prototype.h=function(){return this.ia};P.prototype.getVersion=P.prototype.h;P.prototype.s=function(){for(var a=this.a.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(of(this,d))}return qb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};P.prototype.dump=P.prototype.s;function of(a,b){return nf(a,b).then(function(a){return a.map(function(a){return a.value})})};function pf(a,b){this.a=a;this.b=b}pf.prototype.get=function(a){if(0==a.length)return null!=this.a.getAll?qf(this):rf(this);a=a.map(function(a){return new t(function(c,d){var e;try{e=this.a.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.b(a.target.result))}.bind(this)},this)},this);return qb(a)};
function rf(a){return new t(function(a,c){var d=[],e;try{e=this.a.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var c=e.result;c?(d.push(this.b(c.value)),c.continue()):a(d)}.bind(this)},a)}function qf(a){return new t(function(a,c){var d;try{d=this.a.getAll()}catch(e){c(e);return}d.onerror=c;d.onsuccess=function(){var c=d.result.map(function(a){return this.b(a)},this);a(c)}.bind(this)},a)}
function sf(a,b){return new t(function(a,d){var e;try{e=b()}catch(f){d(f);return}e.onsuccess=a;e.onerror=d},a)}pf.prototype.put=function(a){if(0==a.length)return u();a=a.map(function(a){return sf(this,function(){return this.a.put(a.ga())}.bind(this))},this);return qb(a)};
pf.prototype.remove=function(a){return new t(function(b,c){var d=this.a.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return sf(this,function(){return this.a.clear()}.bind(this)).then(b,c);d=a.map(function(a){return sf(this,function(){return this.a.delete(a)}.bind(this))},this);qb(d).then(b,c)}.bind(this);d.onerror=c},this)};function tf(a,b,c,d,e){tc.call(this,c,e);this.C=a;this.c=b;this.u=d;this.c.oncomplete=this.J.resolve.bind(this.J);this.c.onabort=this.J.b.bind(this.J)}q(tf,tc);tf.prototype.a=function(a,b,c){return this.u?(c=null!=c?c:0,a=this.c.objectStore(a),new Qc(a,b,0==c?na(Uc,this.C):Wc)):new pf(this.c.objectStore(a),b)};tf.prototype.f=function(){return this.J.a};function uf(a,b){this.c=a;this.m=b;this.b=b.b.Kb||!1}g=uf.prototype;
g.Ja=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new G(352);var c=a||function(){return u()};return new t(function(a,e){var f;try{f=b.open(this.m.name(),this.m.version())}catch(h){e(h);return}f.onerror=function(a){a=a.target.error;e(new G(361,a.name,a.message))};f.onupgradeneeded=function(a){vf(this,c,a).then(function(){},e)}.bind(this);f.onsuccess=function(b){this.a=b.target.result;wf(this).then(function(b){jc=b+1;a(this.a)}.bind(this))}.bind(this)},
this)};function vf(a,b,c){var d=c.target.result;c=new P(c.oldVersion,d,c.target.transaction,a.b);xf(d);a.m.a().forEach(na(a.Jb,d),a);return b(c)}function xf(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}g.Jb=function(a,b){a.objectStoreNames.contains(b.getName())||a.createObjectStore(b.getName(),{keyPath:"id"});b.c&&(b.a.forEach(function(b){yf(a,b.o())},this),yf(a,ec(b)))};
function yf(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}g.Ba=function(a,b,c){b=this.a.transaction(zf(b),0==a?"readonly":"readwrite");return new tf(this.c,b,a,this.b,c)};function zf(a){var b=D();a.forEach(function(a){b.add(a.getName());a.c&&(a.a.forEach(function(a){b.add(a.o())}),b.add(ec(a)))});return E(b)}
function wf(a){function b(){if(0==d.length)return u();var a=d.shift();return c(a).then(b)}function c(a){return new t(function(b,c){var d;try{d=e.transaction([a]).objectStore(a).openCursor(null,"prev")}catch(ga){c(ga);return}d.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));b(f)};d.onerror=function(){b(f)}})}var d=a.m.a().map(function(a){return a.getName()}),e=a.a,f=0,h=function(a){return this.b?(a=Ic(a.value),Object.keys(a.za).reduce(function(a,b){return Math.max(a,b)},0)):a.key}.bind(a);
return new t(function(a){b().then(function(){a(f)})})}g.close=function(){this.a.close()};g.Pa=function(){throw new G(511);};g.Sa=function(){};g.Ua=function(){};function Af(a,b,c){tc.call(this,b,c);this.c=a;0==b&&this.J.resolve()}q(Af,tc);Af.prototype.a=function(a){return this.c.Pa(a)};Af.prototype.f=function(){this.J.resolve();return this.J.a};function Bf(a){this.m=a;this.b=B()}g=Bf.prototype;g.Ja=function(){this.m.a().forEach(this.Mb,this);return u()};g.Pa=function(a){var b=this.b.get(a)||null;if(null===b)throw new G(101,a);return b};g.Ba=function(a,b,c){return new Af(this,a,c)};function Cf(a,b){if(!a.b.has(b)){var c=new Ye;a.b.set(b,c)}}g.Mb=function(a){Cf(this,a.getName());a.c&&(a.a.forEach(function(a){Cf(this,a.o())},this),Cf(this,ec(a)))};g.close=function(){};g.Sa=function(){};g.Ua=function(){};function Df(a){Bf.call(this,a);this.a=null}q(Df,Bf);Df.prototype.Sa=function(a){null===this.a&&(this.a=a)};Df.prototype.Ua=function(a){null===this.a||this.a(a)};function Ef(a,b,c){this.a=a;this.D='"'+b+'"';this.b=c}Ef.prototype.get=function(a){var b=this.b;return Ff(this.a,"SELECT id, value FROM "+this.D+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
Ef.prototype.put=function(a){if(0==a.length)return u();var b="INSERT OR REPLACE INTO "+this.D+"(id, value) VALUES (?, ?)";a.forEach(function(a){Ff(this.a,b,[a.id(),JSON.stringify(a.w)])},this);return u()};Ef.prototype.remove=function(a){Ff(this.a,"DELETE FROM "+this.D+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return u()};function Gf(a,b,c){tc.call(this,b,c);this.u=a;this.C=B();this.c=[]}q(Gf,tc);function Hf(a){return a.replace(".","__d__").replace("#","__s__")}Gf.prototype.a=function(a,b){var c=this.C.get(a)||null;null===c&&(c=new Ef(this,Hf(a),b),this.C.set(a,c));return c};function Ff(a,b,c,d){var e=v();a.c.push({Ub:b,Sb:c,transform:d,J:e});return e.a}
Gf.prototype.f=function(){var a=null,b=this.J.b.bind(this.J),c=function(a,b){this.J.b(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.J.resolve(k)}0<this.c.length?(a=k=this.c.shift(),b.executeSql(k.Ub,k.Sb,e,c)):this.J.resolve(d)}.bind(this);0==this.h?this.u.readTransaction(e,b):this.u.transaction(e,b);return this.J.a};function Q(a,b,c){this.a=c;this.b=a;this.M=b}p("lf.backstore.WebSqlRawBackStore",Q);Q.prototype.C=function(){return this.a};Q.prototype.getRawDBInstance=Q.prototype.C;Q.prototype.O=function(){throw new G(356);};Q.prototype.getRawTransaction=Q.prototype.O;function If(a){return new Gf(a.a,1,new zd(a.b,D()))}Q.prototype.f=function(a){var b=If(this);Ff(b,"DROP TABLE "+a,[]);return b.V()};Q.prototype.dropTable=Q.prototype.f;
function Jf(a,b){var c=If(a);Ff(c,"SELECT id, value FROM "+b,[]);return c.V().then(function(a){for(var b=a[0].rows.length,c=Array(b),h=0;h<b;++h)c[h]={id:a[0].rows.item(h).id,value:JSON.parse(a[0].rows.item(h).value)};return u(c)})}function Kf(a,b,c){var d=If(a),e="UPDATE "+b+" SET value=? WHERE id=?";return Jf(a,b).then(function(a){a.forEach(function(a){a=c(a);Ff(d,e,[JSON.stringify(a.value),a.id])});return d.V()})}
Q.prototype.c=function(a,b,c){var d=kf(c);return Kf(this,a,function(a){a.value[b]=d;return a})};Q.prototype.addTableColumn=Q.prototype.c;Q.prototype.g=function(a,b){return Kf(this,a,function(a){delete a.value[b];return a})};Q.prototype.dropTableColumn=Q.prototype.g;Q.prototype.u=function(a,b,c){return Kf(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};Q.prototype.renameTableColumn=Q.prototype.u;Q.prototype.j=function(a){var b={},c;for(c in a)b[c]=kf(a[c]);return lc(b)};
Q.prototype.createRow=Q.prototype.j;Q.prototype.h=function(){return this.M};Q.prototype.getVersion=Q.prototype.h;function Lf(a){Ff(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
Q.prototype.s=function(){var a=v(),b=If(this);Lf(b);var c={};b.V().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return Jf(this,a).then(function(b){c[a]=b})},this);qb(b).then(function(){a.resolve(c)})}.bind(this));return a.a};Q.prototype.dump=Q.prototype.s;function Mf(a,b,c){this.b=a;this.m=b;this.c=c||1}g=Mf.prototype;g.Ja=function(a){if(null==window.openDatabase)throw new G(353);var b=a||function(){return u()};return new t(function(a){var d=window.openDatabase(this.m.name(),"",this.m.name(),this.c);if(null!=d)this.a=d,Nf(this,b).then(a,function(a){if(a instanceof G)throw a;throw new G(354,a.message);});else throw new G(354);},this)};
function Nf(a,b){var c=v(),d=new Gf(a.a,1,new zd(a.b,D()));Ff(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);Ff(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.V().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.m.version()?Of(this,b,d).then(c.resolve.bind(c)):d>this.m.version()?c.b(new G(108)):c.resolve()}.bind(a),c.b.bind(c));return c.a}g.Ba=function(a,b,c){if(null!=this.a)return new Gf(this.a,a,c);throw new G(2);};g.close=function(){};
g.Pa=function(){throw new G(512);};g.Sa=function(){throw new G(355);};g.Ua=function(){throw new G(355);};function Of(a,b,c){var d=v();Pf(a).then(function(){b(new Q(this.b,c,this.a)).then(function(){return Qf(this)}.bind(this)).then(d.resolve.bind(d))}.bind(a),d.b.bind(d));return d.a}
function Pf(a){var b=a.m.a(),c=new Gf(a.a,1,new zd(a.b,D())),d=new Gf(a.a,1,new zd(a.b,D()));Ff(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.m.version()]);Lf(c);return c.V().then(function(a){var c=a[1];c.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){Ff(d,"DROP TABLE "+('"'+a+'"'),[])});var h=[],k=[],m=[];b.map(function(a){-1==c.indexOf(a.getName())&&h.push(a.getName());a.h&&(a.a.forEach(function(a){a=Hf(a.o());h.push(a);k.push(a)}),a=Hf(ec(a)),h.push(a),m.push(a))});
h.forEach(function(a){Ff(d,"CREATE TABLE "+('"'+a+'"')+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return d.V()})}function Qf(a){var b=0,c=v(),d=function(a){var c=new Gf(this.a,0);Ff(c,"SELECT MAX(id) FROM "+('"'+a+'"'),[]);return c.V().then(function(a){a=a[0].rows.item(0)[0];b=Math.max(a,b)})}.bind(a);a=a.m.a().map(function(a){return d(a.getName())});qb(a).then(function(){c.resolve(b)},function(a){c.b(a)});return c.a};function Rf(a,b){this.g=Qd();this.b=a;this.a=b;this.f=Sf(this)}function Sf(a){if(0<a.b.a.length)return a.b.a;var b=[];a.b.l.forEach(function(a){a.pa().forEach(function(a){b.push(a)})});return b}Rf.prototype.c=function(a,b){return this.f.every(function(c){return Rd(this.g,c.G(),"eq")(N(a,c),N(b,c))},this)};
function Tf(a,b,c){var d=null===b?[]:b.entries,e=Wa(d,c.entries,a.c.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.a.splice(f,1),k=Uf(h,k,0,a.a),b.push(k))}e=Wa(d,c.entries,a.c.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.a.splice(h,0,k.aa.w),k=Uf(h,[],1,a.a),b.push(k));return b}function Uf(a,b,c,d){return{addedCount:c,index:a,object:d,removed:b,type:"splice"}};function Vf(){this.a=B()}Vf.prototype.gb=function(a,b){var c=ha(a.a).toString(),d=this.a.get(c)||null;null===d&&(d=new Wf(a),this.a.set(c,d));d.gb(b)};Vf.prototype.qb=function(a,b){var c=ha(a.a).toString(),d=this.a.get(c)||null;d.qb(b);0<d.Va.size||this.a.delete(c)};function Oe(a,b){var c=D();b.forEach(function(a){c.add(a.getName())});var d=[];a.a.forEach(function(a){a=a.Qa();a.context.l.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function Me(a,b,c){b=ha(null!=b.C?b.C:b).toString();a=a.a.get(b)||null;null!==a&&Xf(a,c)}function Wf(a){this.b=a;this.Va=D();this.f=[];this.a=null;this.c=new Rf(a.a,this.f)}Wf.prototype.gb=function(a){this.Va.has(a)||this.Va.add(a)};Wf.prototype.qb=function(a){return this.Va.delete(a)};Wf.prototype.Qa=function(){var a=this.b;return{context:a.a,pb:Yf(a)}};function Xf(a,b){var c=Tf(a.c,a.a,b);a.a=b;0<c.length&&a.Va.forEach(function(a){a(c)})};function Zf(a){this.a=B();this.b=B();a.a().forEach(function(a){this.b.set(a.getName(),D())},this)}g=Zf.prototype;g.set=function(a,b){this.a.set(b.id(),b);this.b.get(a).add(b.id())};function $f(a,b,c){var d=a.b.get(b);c.forEach(function(a){this.a.set(a.id(),a);d.add(a.id())},a)}g.get=function(a){return this.a.get(a)||null};function ag(a,b){return b.map(function(a){return this.get(a)},a)}
function Vc(a,b,c,d){var e=[],f=Math.min(c,d),h=Math.max(c,d);b=a.b.get(b);if(b.size<h-f)b.forEach(function(a){a>=f&&a<=h&&(a=this.a.get(a),e.push(a))},a);else for(c=f;c<=h;++c)b.has(c)&&(d=a.a.get(c),e.push(d));return e}g.remove=function(a,b){this.a.delete(b);this.b.get(a).delete(b)};g.Oa=function(a){return null!=a?this.b.get(a).size:this.a.size};g.clear=function(){this.a.clear();this.b.clear()};function bg(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(n(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function cg(){this.a=0}cg.prototype.add=function(a,b){this.a+=b};cg.prototype.remove=function(a,b){this.a-=b};cg.prototype.clear=function(){this.a=0};function dg(a,b){a.clear();b.forEach(function(a){this.a+=a.a},a)};function eg(a,b,c){var d=0,e=a.length;for(c=c||fg;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function fg(a,b){return a-b}function gg(a,b,c){c=eg(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function hg(a,b,c,d){this.D=a;this.b=b;this.f=c;this.c=new cg;if(d){a=511;a*=a*a;if(d.length>=a)throw new G(6,a);d=ig(this,d);this.a=d=jg(d)}else this.clear()}var kg=[];g=hg.prototype;g.getName=function(){return this.D};g.toString=function(){return this.a.toString()};g.add=function(a,b){this.a=lg(this.a,a,b)};g.set=function(a,b){this.a=lg(this.a,a,b,!0)};g.remove=function(a,b){this.a=this.a.remove(a,b)};g.get=function(a){return this.a.get(a)};
g.Za=function(a){if(null==a)return this.ea().a;if(a instanceof H){if(Td(a))return this.ea().a;if(Xd(a))return this.get(a.l).length}return this.Ca([a]).length};g.ea=function(){return this.c};function mg(a,b,c,d){var e=Array(b);ng(a.a,{offset:c?a.c.a-b-d:d,count:b,rb:0},e);return c?e.reverse():e}
g.Ca=function(a,b,c,d){var e=og(this.a).i[0];if(!n(e)||0==c)return kg;b=b||!1;c=null!=c?Math.min(c,this.c.a):this.c.a;d=d||0;var f=Math.min(Math.max(this.c.a-d,0),c);if(0==f)return kg;if(!n(a)||1==a.length&&a[0]instanceof H&&Td(a[0]))return mg(this,f,b,d);a=this.b.Eb(a);var h=Array(b?this.c.a:f),k={count:0,K:h.length,reverse:b,I:d},m=1<this.oa().lb();a.forEach(function(a){for(var b=this.b.cb(a),b=this.b.jb(a)?e:b[0],b=this.a.s(b),c=0;null!=b&&k.count<k.K;){if(m){for(var d=b,f=a,fc=k,Fb=h,Yc=d.b.oa(),
re=-1,Ma=0;Ma<d.i.length;++Ma)if(Yc.ya(d.i[Ma],f)){re=Ma;break}if(-1!=re)for(Ma=re;Ma<d.i.length&&fc.count<fc.K;++Ma)Yc.ya(d.i[Ma],f)&&pg(d,fc,Fb,Ma)}else qg(b,a,k,h);0!=k.I||b.b.oa().Bb(b.i[0],a)?c=0:c++;b=2==c?null:b.next()}},this);h.length>k.count&&h.splice(k.count,h.length-k.count);return b?bg(h,b,c,d):h};g.clear=function(){this.a=rg(this);this.c.clear()};g.La=function(a){return sg(this.a,a)};g.min=function(){return tg(this,this.b.min.bind(this.b))};g.max=function(){return tg(this,this.b.max.bind(this.b))};
function ug(a,b,c){if(!a.b.hb(b.i[c]))if(1<b.i[c].length){if(null===b.i[c][0])return null}else return null;return[b.i[c],a.f?[b.c[c]]:b.c[c]]}function tg(a,b){var c;a:{c=og(a.a);var d=0;do if(d>=c.i.length)c=c.g,d=0;else{var e=ug(a,c,d);if(null!==e){c=e;break a}d++}while(null!==c);c=null}a:{d=vg(a.a);e=d.i.length-1;do if(0>e)d=d.j,e=0;else{var f=ug(a,d,e);if(null!==f){d=f;break a}e--}while(null!==d);d=null}return null===c||null===d?null:1==b(c[0],d[0])?c:d}g.ha=function(){return this.f};g.oa=function(){return this.b};
function wg(a,b,c){return null!=b?0==a.b.Ma(b,c):!1}g.ga=function(){for(var a=[],b=og(this.a);b;)a.push(new ic(b.$,[b.i,b.c])),b=b.g;return a};function xg(a,b,c,d){a=new hg(b,a,c);d=yg(d,a);a.a=d;return a}function zg(a,b){this.$=a;this.b=b;this.h=0;this.g=this.j=this.f=null;this.i=[];this.c=[];this.a=[];this.s=1==b.oa().lb()?this.Ab:this.zb}function rg(a){return new zg(jc++,a)}function R(a){return 0==a.h}g=zg.prototype;g.next=function(){return this.g};
function Ag(a){function b(a){return null!=a?a.$.toString():"_"}var c=a.$+"["+a.i.join("|")+"]",d=a.a.map(function(a){return a.$}).join("|"),e=a.c.join("/"),f=b(a.j)+"{",f=R(a)?f+e:f+d,f=f+"}"+b(a.f);a.g&&(a=Ag(a.g),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}g.toString=function(){var a="",b=Ag(this),a=a+(b[0]+"\n"+b[1]+"\n");this.a.length&&(a+=this.a[0].toString());return a};function og(a){return R(a)?a:og(a.a[0])}function vg(a){return R(a)?a:vg(a.a[a.a.length-1])}
function Bg(a,b){b&&(b.j=a);a&&(a.g=b)}function ig(a,b){for(var c=b.length,d=0,e=rg(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.i=k.map(function(a){return a.key});e.c=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=rg(e.b),Bg(e,h),e=h)}return f}function Cg(a){var b=a[0],c=rg(b.b);c.h=b.h+1;c.a=a;for(b=0;b<a.length;++b)a[b].f=c,0<b&&c.i.push(a[b].i[0]);return c}
function jg(a){var b=a,c=[];do c.push(b),b=b.g;while(b);if(512>=c.length)b=Cg(c);else{var d=c.length,e=0,b=rg(a.b);for(b.h=a.h+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Cg(f);h.f=b;b.a.length&&(b.i.push(f[0].i[0]),Bg(b.a[b.a.length-1],h));b.a.push(h);e+=a;d-=a}}return b}g.get=function(a){var b=Dg(this,a);if(R(this)){var c=kg;wg(this.b,this.i[b],a)&&(c=c.concat(this.c[b]));return c}b=wg(this.b,this.i[b],a)?b+1:b;return this.a[b].get(a)};
function sg(a,b){var c=Dg(a,b);return wg(a.b,a.i[c],b)?!0:R(a)?!1:sg(a.a[c],b)}g.remove=function(a,b){Eg(this,a,-1,b);if(null===this.f){var c=this;1==this.a.length&&(c=this.a[0],c.f=null);return c}return this};function Fg(a){return R(a)?a.i[0]:Fg(a.a[0])}function Gg(a){a.i=[];for(var b=1;b<a.a.length;++b)a.i.push(Fg(a.a[b]))}
function Eg(a,b,c,d){var e=Dg(a,b),f=R(a);if(!f){var h=wg(a.b,a.i[e],b)?e+1:e;if(Eg(a.a[h],b,h,d))Gg(a);else return!1}else if(!wg(a.b,a.i[e],b))return!1;if(a.i.length>e&&wg(a.b,a.i[e],b)){if(n(d)&&!a.b.ha()&&f&&(h=a.c[e],d=eg(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.b.ea().remove(b,1),a.c[e].length))return!1;a.i.splice(e,1);f&&(f=a.b.ha()?1:a.c[e].length,a.c.splice(e,1),a.b.ea().remove(b,f))}if(256>a.i.length&&null!==a.f){a:{b=null;if(a.g&&256<a.g.i.length)b=a.g,e=d=0,f=a.i.length+1;else if(a.j&&
256<a.j.i.length)b=a.j,d=a.j.i.length-1,e=R(a)?d:d+1,f=0;else{b=!1;break a}a.i.splice(f,0,b.i[d]);b.i.splice(d,1);d=R(a)?a.c:a.a;h=null;R(a)?h=b.c:(h=b.a,h[e].f=a);d.splice(f,0,h[e]);h.splice(e,1);R(b)||(Gg(b),Gg(a));b=!0}b||Hg(a,c)}return!0}
function Hg(a,b){var c,d,e;a.g&&511>a.g.i.length?(c=a.g,e=d=0):a.j&&(c=a.j,d=c.i.length,e=R(c)?c.c.length:c.a.length);d=[d,0].concat(a.i);Array.prototype.splice.apply(c.i,d);d=null;R(a)?d=a.c:(d=a.a,d.forEach(function(a){a.f=c}));d=[e,0].concat(d);Array.prototype.splice.apply(R(c)?c.c:c.a,d);Bg(a.j,a.g);R(c)||Gg(c);-1!=b&&(a.f.i.splice(b,1),a.f.a.splice(b,1))}
function lg(a,b,c,d){var e=Dg(a,b);if(R(a)){if(wg(a.b,a.i[e],b)){if(d)a.b.ea().remove(b,a.b.ha()?1:a.c[e].length),a.c[e]=a.b.ha()?c:[c];else{if(a.b.ha())throw new G(201);if(!gg(a.c[e],c))throw new G(109);}a.b.ea().add(b,1);return a}a.i.splice(e,0,b);a.c.splice(e,0,a.b.ha()?c:[c]);a.b.ea().add(b,1);512==a.i.length&&(e=rg(a.b),b=rg(a.b),b.h=1,b.i=[a.i[256]],b.a=[a,e],b.f=a.f,a.f=b,e.i=a.i.splice(256),e.c=a.c.splice(256),e.f=b,Bg(e,a.g),Bg(a,e),a=b);return a}e=wg(a.b,a.i[e],b)?e+1:e;b=lg(a.a[e],b,c,
d);R(b)||1!=b.i.length||(a.i.splice(e,0,b.i[0]),b.a[1].f=a,b.a[0].f=a,a.a.splice(e,1,b.a[1]),a.a.splice(e,0,b.a[0]));return 512==a.i.length?Ig(a):a}function Ig(a){var b=rg(a.b),c=rg(a.b);b.f=a.f;b.h=a.h+1;b.i=[a.i[256]];b.a=[a,c];a.i.splice(256,1);c.f=b;c.h=a.h;c.i=a.i.splice(256);c.a=a.a.splice(257);c.a.forEach(function(a){a.f=c});a.f=b;Bg(c,a.g);Bg(a,c);return b}function Dg(a,b){for(var c=0,d=a.i.length,e=a.b.oa();c<d;){var f=c+d>>1;-1==e.Ma(a.i[f],b)?c=f+1:d=f}return c}
g.Ab=function(a){if(!R(this)){var b=Dg(this,a);wg(this.b,this.i[b],a)&&b++;return this.a[b].Ab(a)}return this};g.zb=function(a){if(!R(this)){var b=Dg(this,a);wg(this.b,this.i[b],a)&&(a.some(function(a){return a==I})||b++);return this.a[b].zb(a)}return this};
function qg(a,b,c,d){function e(a){return a[0]?a[1]?0:1:-1}var f=a.b.oa(),h=0,k=a.i.length-1,m=a.i,z=e(f.va(m[h],b)),Y=e(f.va(m[k],b));if(1!=z&&(-1!=z||-1!=Y)){var ga=function(a,b){var c=a+b>>1;return c==a?c+1:c},sb=function(a,c,d){if(a>=c)return 0==d?c:-1;var h=e(f.va(m[a],b));if(0==h)return a;if(1==h)return-1;h=ga(a,c);if(h==c)return 0==d?c:-1;var k=e(f.va(m[h],b));return 0==k?sb(a,h,k):-1==k?sb(h+1,c,d):sb(a+1,h,k)},Eb=function(a,c){if(a>=c)return a;var d=e(f.va(m[c],b));if(0==d)return c;if(-1==
d)return a;d=ga(a,c);if(d==c)return a;var h=e(f.va(m[d],b));return 0==h?Eb(d,c):1==h?Eb(a,d-1):-1};0!=z&&(h=sb(h+1,k,Y));-1!=h&&(k=Eb(h,k),-1!=k&&k>=h&&Jg(a,c,d,h,k+1))}}function pg(a,b,c,d){if(a.b.ha())!b.reverse&&b.I?b.I--:c[b.count++]=a.c[d];else for(var e=0;e<a.c[d].length&&b.count<c.length;++e)!b.reverse&&b.I?b.I--:c[b.count++]=a.c[d][e]}function Jg(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.K));++d)pg(a,b,c,d)}
function ng(a,b,c){if(R(a))for(var d=0;d<a.c.length&&0<b.count;++d)if(0<b.offset){if(b.offset-=a.b.ha()?1:a.c[d].length,0>b.offset)for(var e=a.c[d].length+b.offset;e<a.c[d].length&&0<b.count;++e)c[b.rb++]=a.c[d][e],b.count--}else if(a.b.ha())c[b.rb++]=a.c[d],b.count--;else for(e=0;e<a.c[d].length&&0<b.count;++e)c[b.rb++]=a.c[d][e],b.count--;else for(d=0;d<a.a.length&&0<b.count;++d)ng(a.a[d],b,c)}
function yg(a,b){for(var c=b.ea(),d=a.map(function(a){var d=new zg(a.id(),b);d.i=a.w[0];d.c=a.w[1];d.i.forEach(function(a,e){c.add(a,b.ha()?1:d.c[e].length)});return d}),e=0;e<d.length-1;++e)Bg(d[e],d[e+1]);return 1<d.length?jg(d[0]):d[0]};function Kg(a){this.a=0==a?Lg:Mg;this.b=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.c=0==a?Ng:Og}function Mg(a,b){return a>b?1:a<b?-1:0}function Lg(a,b){return Mg(b,a)}function Og(a,b){return Yd(a,b)}function Ng(a,b){return Yd(b,a)}g=Kg.prototype;g.va=function(a,b){var c=this.b(b),d=[c.l==I,c.A==I];if(!d[0]){var e=this.a(a,c.l);d[0]=c.U?1==e:-1!=e}d[1]||(e=this.a(a,c.A),d[1]=c.W?-1==e:1!=e);return d};g.Ma=function(a,b){return this.a(a,b)};
g.min=function(a,b){return a<b?1:a==b?0:-1};g.max=function(a,b){return a>b?1:a==b?0:-1};g.ya=function(a,b){var c=this.va(a,b);return c[0]&&c[1]};g.Bb=function(a,b){return this.ya(a,b)};g.Eb=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.c(a,c)}.bind(this))};g.jb=function(a){return this.b(a).l==I};g.cb=function(a){a=this.b(a);return[a.l,a.A]};g.hb=function(a){return null!==a};g.lb=function(){return 1};
g.toString=function(){return this.Ma==Lg?"SimpleComparator_DESC":"SimpleComparator_ASC"};function Pg(a){Kg.call(this,a);this.a=0==a?Qg:Rg}q(Pg,Kg);function Rg(a,b){return null===a?null===b?0:-1:null===b?1:Mg(a,b)}function Qg(a,b){return Rg(b,a)}Pg.prototype.ya=function(a,b){return null===a?Td(b):Pg.na.ya.call(this,a,b)};Pg.prototype.min=function(a,b){var c=null===a?null===b?0:-1:null===b?1:null;null===c&&(c=Pg.na.min.call(this,a,b));return c};
Pg.prototype.max=function(a,b){var c=null===a?null===b?0:-1:null===b?1:null;null===c&&(c=Pg.na.max.call(this,a,b));return c};function Sg(a){this.a=a.map(function(a){return new Kg(a)})}function Tg(a,b,c,d){for(var e=0,f=0;f<a.a.length&&0==e;++f)e=d(a.a[f],b[f],c[f]);return e}g=Sg.prototype;g.Ma=function(a,b){return Tg(this,a,b,function(a,b,e){return b==I||e==I?0:a.Ma(b,e)})};g.min=function(a,b){return Tg(this,a,b,function(a,b,e){return a.min(b,e)})};g.max=function(a,b){return Tg(this,a,b,function(a,b,e){return a.max(b,e)})};
g.va=function(a,b){for(var c=[!0,!0],d=0;d<this.a.length&&(c[0]||c[1]);++d){var e=this.a[d].va(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};g.ya=function(a,b){for(var c=!0,d=0;d<this.a.length&&c;++d)c=this.a[d].ya(a[d],b[d]);return c};g.Bb=function(a,b){return this.a[0].ya(a[0],b[0])};
g.Eb=function(a){var b=a.filter(function(a){return a.every(ca)});a=Array(this.a.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.a[b].c(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.a.length&&0==c;++h)c=this.a[h].c(a[h],b[h]);return c}.bind(this))};g.jb=function(a){return this.a[0].jb(a[0])};
g.cb=function(a){var b=a.map(function(a,b){return this.a[b].cb(a)[0]},this);a=a.map(function(a,b){return this.a[b].cb(a)[1]},this);return[b,a]};g.hb=function(a){return a.every(function(a,c){return this.a[c].hb(a)},this)};g.lb=function(){return this.a.length};function Ug(a){Sg.call(this,a);this.a=a.map(function(a){return new Pg(a)})}q(Ug,Sg);function Vg(a){if(1==a.a.length)return new Kg(a.a[0].ta);var b=a.a.map(function(a){return a.ta});return a.a.some(function(a){return a.S.Ia()})?new Ug(b):new Sg(b)};function Wg(a){this.a=a;this.b=D();this.c=new cg;this.f=new cg}g=Wg.prototype;g.getName=function(){return this.a.getName()};g.add=function(a,b){null===a?(this.b.add(b),this.c.add(a,1)):this.a.add(a,b)};g.set=function(a,b){null===a?(this.b.clear(),this.c.clear(),this.add(a,b)):this.a.set(a,b)};g.remove=function(a,b){null===a?b?(this.b.delete(b),this.c.remove(a,1)):(this.b.clear(),this.c.clear()):this.a.remove(a,b)};g.get=function(a){return null===a?E(this.b):this.a.get(a)};g.Za=function(a){return this.a.Za(a)};
g.ea=function(){dg(this.f,[this.a.ea(),this.c]);return this.f};g.Ca=function(a,b,c,d){b=this.a.Ca(a,b,c,d);return null!=a?b:b.concat(E(this.b))};g.clear=function(){this.b.clear();this.a.clear()};g.La=function(a){return null===a?0!=this.b.size:this.a.La(a)};g.min=function(){return this.a.min()};g.max=function(){return this.a.max()};g.ga=function(){return[new ic(-2,E(this.b))].concat(this.a.ga())};g.oa=function(){return this.a.oa()};
function Xg(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new G(102);var d=b[c].w,e=b.slice(0);e.splice(c,1);var c=a(e),f=new Wg(c);d.forEach(function(a){f.b.add(a)});return f}g.ha=function(){return this.a.ha()};function Yg(a){this.D=a;this.a=D();this.b=new Kg(1)}g=Yg.prototype;g.getName=function(){return this.D};g.add=function(a){if("number"!=typeof a)throw new G(103);this.a.add(a)};g.set=function(a,b){this.add(a,b)};g.remove=function(a){this.a.delete(a)};g.get=function(a){return this.La(a)?[a]:[]};g.min=function(){return Zg(this,this.b.min.bind(this.b))};g.max=function(){return Zg(this,this.b.max.bind(this.b))};
function Zg(a,b){if(0==a.a.size)return null;var c=E(a.a).reduce(function(a,c){return null===a||1==b(c,a)?c:a},null);return[c,[c]]}g.Za=function(){return this.a.size};g.Ca=function(a,b,c,d){var e=a||[Wd()];a=E(this.a).filter(function(a){return e.some(function(b){return this.b.ya(a,b)},this)},this);return bg(a,b,c,d)};g.clear=function(){this.a.clear()};g.La=function(a){return this.a.has(a)};g.ga=function(){return[new ic(0,E(this.a))]};g.oa=function(){return this.b};
function $g(a,b){var c=new Yg(a);b[0].w.forEach(function(a){c.add(a,a)});return c}g.ha=function(){return!0};g.ea=function(){var a=new cg;a.a=this.a.size;return a};function ah(a){this.b=a.a(Kc);this.a=a.a(Mc);this.c=a.a(Lc)}function bh(a,b){var c=b.a(),d=function(){if(0==c.length)return u();var a=c.shift();return(a.c?ch(this,a):dh(this,a)).then(d)}.bind(a);return d()}function dh(a,b){var c=a.b.Ba(0,[b]),d=c.a(b.getName(),b.b.bind(b),0).get([]).then(function(a){$f(this.c,b.getName(),a);eh(this,b,a)}.bind(a));c.V();return d}
function eh(a,b,c){var d=a.a.a.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.qa(b.getName());b.add(c,a.id())})})}function ch(a,b){var c=a.b.Ba(0,[b]),d=c.a(b.getName(),b.b,0).get([]).then(function(a){$f(this.c,b.getName(),a)}.bind(a)),e=b.a.map(function(a){return fh(this,a,c)},a).concat(gh(a,b,c));c.V();return qb(e.concat(d))}
function fh(a,b,c){c=c.a(b.o(),kc,1);var d=Vg(b);return c.get([]).then(function(a){if(0<a.length)if(cc(b)){var c=xg.bind(void 0,d,b.o(),b.Ra);a=Xg(c,a);this.a.set(b.b,a)}else a=xg(d,b.o(),b.Ra,a),this.a.set(b.b,a)}.bind(a))}function gh(a,b,c){return c.a(ec(b),kc,1).get([]).then(function(a){0<a.length&&(a=$g(ec(b),a),this.a.set(b.getName(),a))}.bind(a))};function hh(){this.c=B()}var ih;function jh(){ih||(ih=new hh);return ih}hh.prototype.clear=function(){this.c.clear()};hh.prototype.clear=hh.prototype.clear;hh.prototype.b=function(a,b){this.c.set(a.toString(),b);return b};hh.prototype.registerService=hh.prototype.b;hh.prototype.a=function(a){var b=this.c.get(a.toString())||null;if(null===b)throw new G(7,a.toString());return b};hh.prototype.getService=hh.prototype.a;hh.prototype.f=function(a){return this.c.has(a.toString())};
hh.prototype.isRegistered=hh.prototype.f;function kh(){var a=jh();return sc(a.c)};function lh(a,b,c,d){return null!=a?null!=b?mh(a,b,c,d):nh(a):oh()}function ph(a){var b="";try{b=JSON.stringify(a)}catch(c){}return b}function qh(a){var b=jh();a=new Jc("ns_"+a);return b.f(a)?b.a(a):null}function oh(){var a={};kh().forEach(function(b){"ns_"==b.substring(0,3)&&(b=b.substring(3),a[b]=qh(b).a(F).version())});return ph(a)}function nh(a){a=qh(a);var b={};if(null!=a){var c=a.a(Mc);a.a(F).a().forEach(function(a){b[a.getName()]=c.get(ec(a)).ea().a})}return ph(b)}
function mh(a,b,c,d){var e=qh(a);a=[];if(null!=e){var f=null;try{f=e.a(F).table(b)}catch(h){}null!=f&&(b=e.a(Mc),e=e.a(Lc),c=b.get(ec(f)).Ca(void 0,!1,c,d),c.length&&(a=ag(e,c).map(function(a){return a.w})))}return ph(a)};function rh(){this.b=B();this.a=B()}function sh(a,b){b.a().forEach(function(a){var b=[];this.a.set(a.getName(),b);var e=ec(a);if(null===this.get(e)){var f=new Yg(e);b.push(f);this.b.set(e,f)}a.a.forEach(function(a){var c;c=Vg(a);c=new hg(a.o(),c,a.Ra);c=cc(a)&&1==a.a.length?new Wg(c):c;b.push(c);this.b.set(a.o(),c)},this)},a);return u()}rh.prototype.get=function(a){return this.b.get(a)||null};
rh.prototype.set=function(a,b){var c=this.a.get(a)||null;null===c&&(c=[],this.a.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.b.set(b.getName(),b)};function th(){};function uh(a,b){this.a=a;this.b=b}uh.prototype.la=function(){return this.a};function vh(){J.call(this)}q(vh,J);function wh(a,b){J.call(this);this.table=a;this.values=b}q(wh,vh);function xh(a,b){wh.call(this,a,b)}q(xh,wh);function yh(a){J.call(this);this.table=a}q(yh,vh);yh.prototype.toString=function(){return"delete("+this.table.getName()+")"};function zh(a,b){J.call(this);this.table=a;this.a=b}q(zh,vh);
zh.prototype.toString=function(){var a=[];this.a&&(a=this.a.map(function(a){return a.F.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function Ah(a){J.call(this);this.L=a}q(Ah,vh);Ah.prototype.toString=function(){return"select("+this.L.toString()+")"};function Bh(a){J.call(this);this.table=a}q(Bh,vh);Bh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.ja||(a+=" as "+this.table.ja);return a+")"};function Ch(){J.call(this)}
q(Ch,vh);Ch.prototype.toString=function(){return"cross_product"};function Dh(a,b){J.call(this);this.a=a;this.b=b}q(Dh,vh);Dh.prototype.toString=function(){var a="project("+this.a.toString();if(null!==this.b)var b=this.b.map(function(a){return a.o()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function Eh(a){J.call(this);this.b=a}q(Eh,vh);Eh.prototype.toString=function(){return"order_by("+Ie(this.b)+")"};function Fh(a){J.call(this);this.a=a}q(Fh,vh);
Fh.prototype.toString=function(){return"aggregation("+this.a.toString()+")"};function Gh(a){J.call(this);this.a=a}q(Gh,vh);Gh.prototype.toString=function(){return"group_by("+this.a.toString()+")"};function Hh(a){J.call(this);this.K=a}q(Hh,vh);Hh.prototype.toString=function(){return"limit("+this.K+")"};function Ih(a){J.call(this);this.I=a}q(Ih,vh);Ih.prototype.toString=function(){return"skip("+this.I+")"};function Jh(a,b){J.call(this);this.L=a;this.a=b}q(Jh,vh);
Jh.prototype.toString=function(){return"join(type: "+(this.a?"outer":"inner")+", "+this.L.toString()+")"};function Kh(a,b){var c=[],d=null,e=null;he(a,function(a){var h=b(a);null==a.f?e=h:L(d,h);var k=a.f;null!==k&&K(k).length==K(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<K(a).length&&c.push(h);d=null===a.g?c[c.length-1]:h});return e}function Lh(a){return Mh(a,function(a){return null===a.g})}function Nh(a){var b=a.f,c=0;null!==b&&(c=K(b).indexOf(a),b.removeChild(a));var d=K(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||ee(b,d,c+f)});return{parent:b,children:d}}
function Oh(a,b){K(a).slice().forEach(function(c){a.removeChild(c);L(b,c)});L(a,b)}function Ph(a){var b=de(a,0);Nh(a);Oh(b,a);return b}function Qh(a,b,c){var d=de(a,0),e=K(d).slice();if(!e.some(function(a){return b(a)}))return a;Nh(a);e.forEach(function(e,h){if(b(e)){var k=c(a);fe(d,h);L(k,e);ee(d,k,h)}});return d}function Rh(a,b,c,d){var e=a.f;null!==e&&(a=K(e).indexOf(a),fe(e,a),ee(e,c,a));K(b).slice().forEach(function(a){b.removeChild(a);L(d,a)});return c}
function Mh(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||K(a).forEach(d)}var e=[];d(a);return e}function Sh(a,b){var c=b||function(a){return a.toString()+"\n"},d="";he(a,function(a){for(var b=0;b<ce(a);b++)d+="-";d+=c(a)});return d};function Th(){}q(Th,th);Th.prototype.b=function(a){this.a=a;Uh(this,this.a);return this.a};function Uh(a,b){if(b instanceof Ah){var c=Vh(a,b.L),c=Wh(a,c);Rh(b,b,c[0],c[1]);b==a.a&&(a.a=c[0]);b=c[0]}K(b).forEach(function(a){Uh(this,a)},a)}function Vh(a,b){if(0==K(b).length||"and"!=b.a)return[b];var c=K(b).slice().map(function(a){b.removeChild(a);return Vh(this,a)},a);return Ba(c)}function Wh(a,b){var c=null,d=null;b.map(function(a,b){var h=new Ah(a);0==b?c=h:L(d,h);d=h},a);return[c,d]};function Xh(){}q(Xh,th);Xh.prototype.b=function(a,b){if(3>b.l.length)return a;this.a=a;Yh(this,this.a);return this.a};function Yh(a,b){if(b instanceof Ch)for(;2<K(b).length;){for(var c=new Ch,d=0;2>d;d++){var e=fe(b,0);L(c,e)}ee(b,c,0)}K(b).forEach(function(a){Yh(this,a)},a)};function Zh(a){this.a=a;this.f=null}Zh.prototype.c=function(){null===this.f&&(this.f=this.b());return this.f};function $h(a){Zh.call(this,a)}q($h,Zh);$h.prototype.b=function(){return this.a.s?new xh(this.a.f,this.a.values):new wh(this.a.f,this.a.values)};function ai(a){Zh.call(this,a)}q(ai,Zh);ai.prototype.b=function(){var a=new zh(this.a.table,this.a.set),b=null!=this.a.H?new Ah(this.a.H.Ga()):null,c=new Bh(this.a.table);null===b?L(a,c):(L(b,c),L(a,b));return a};function bi(a,b,c){this.a=a;this.b=b;this.f=c}bi.prototype.c=function(){this.f.forEach(function(a){this.a=a.b(this.a,this.b)},this);return this.a};function ci(a,b){Zh.call(this,a);this.g=b}q(ci,Zh);ci.prototype.b=function(){var a=new yh(this.a.l),b=null!=this.a.H?new Ah(this.a.H.Ga()):null,c=new Bh(this.a.l);null===b?L(a,c):(L(b,c),L(a,b));return(new bi(a,this.a,this.g)).c()};function di(a,b,c){ie.call(this);this.a=a;this.b=b;this.c=c;this.j=null;a=Qd();this.h=Rd(a,this.a.G(),this.c);this.s=a.b.get(this.a.G())||null}q(di,ie);g=di.prototype;g.Ga=function(){var a=new di(this.a,this.b,this.c),b=this.N();a.$=b;return a};g.pa=function(a){return null!=a?(a.push(this.a),a.push(this.b),a):[this.a,this.b]};g.B=function(a){a=null!=a?a:D();a.add(this.a.X());a.add(this.b.X());return a};
g.reverse=function(){var a=this.c;switch(this.c){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new di(this.b,this.a,a)};g.ab=function(a){var b=a.entries.filter(function(a){return this.h(N(a,this.a),N(a,this.b))},this);return new M(b,a.B())};g.toString=function(){return"join_pred("+this.a.o()+" "+this.c+" "+this.b.o()+")"};
function ei(a,b,c){var d=null,e=null;-1!=b.B().indexOf(dc(a.a.X()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.a;a.a=a.b;a.b=b;b=a.c;switch(a.c){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.c=b;a.h=Rd(Qd(),a.a.G(),a.c)}return[e,d]}return[d,e]}function fi(a){var b={};a.pa().forEach(function(a){b[a.getName()]=null});return b}
function gi(a,b,c){null===a.j&&(a.j=fi(a.b.X()));var d=new te(new ic(-1,a.j),!1);return we(b,c,d,[dc(a.b.X())])}
function hi(a,b,c,d){var e=[b,c];d||(e=ei(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.a,k=a.b;d&&(e=c,f=b,h=a.b,k=a.a);var m=new ed,z=[];e.entries.forEach(function(a){m.set(String(N(a,h)),a)});var Y=e.B(),ga=f.B();f.entries.forEach(function(a){var b=N(a,k),c=String(b);null!==b&&m.has(c)?m.get(c).forEach(function(b){b=we(a,ga,b,Y);z.push(b)}):d&&z.push(gi(this,a,ga))}.bind(a));a=b.B().concat(c.B());return new M(z,a)}
function ii(a,b,c,d,e){function f(a,b){var c=new te(b,1<Y.length),c=we(a,ga,c,Y);z.push(c)}var h=d.Lb.X(),k=b,m=c;-1!=b.B().indexOf(dc(h))&&(k=c,m=b);var z=[],Y=m.B(),ga=k.B();k.entries.forEach(function(a){var b=this.s(N(a,d.Pb)),b=d.index.get(b);0!=b.length&&(d.index.ha()?f(a,e.get(b[0])):ag(e,b).forEach(f.bind(null,a)))},a);a=k.B().concat(m.B());return new M(z,a)};function ji(){}q(ji,th);ji.prototype.b=function(a,b){if(2>b.l.length)return a;this.a=a;ki(this,this.a,b);return this.a};function ki(a,b,c){if(b instanceof Ah&&b.L instanceof di){var d=b.L.N(),e=de(b,0);e instanceof Ch&&(d=null!=c.g&&c.g.has(d),d=new Jh(b.L,d),Rh(b,e,d,d),b==a.a&&(a.a=d),b=d)}K(b).forEach(function(a){ki(this,a,c)},a)};function li(){this.c=D()}q(li,th);li.prototype.b=function(a,b){if(!n(b.H))return a;this.c.clear();this.a=a;mi(this,this.a);this.c.clear();return this.a};function mi(a,b){if(b instanceof Ah){var c=b.L.B(),d=function(a){return ni(this,a,c)}.bind(a),d=oi(a,b,d);a.c.add(b);d==b&&(d=de(b,0));null!==d&&(null===d.f&&(a.a=d),d instanceof Ah&&!a.c.has(d)&&mi(a,d))}else K(b).forEach(function(a){mi(this,a)},a)}
function oi(a,b,c){var d=b;if(de(b,0)instanceof Ah)d=Ph(b),oi(a,b,c);else if(pi(b)){var e=[],d=Qh(b,c,function(a){a=new Ah(a.L);e.push(a);return a});e.forEach(function(a){oi(this,a,c)},a)}return d}function ni(a,b,c){var d=D();Lh(b).forEach(function(a){d.add(a.table)},a);b instanceof Bh&&d.add(b.table);return Dc(d,c)}function pi(a){a=de(a,0);return a instanceof Ch||a instanceof Jh};function qi(a,b){Zh.call(this,a);this.Xa=b;this.C=this.s=this.M=this.u=this.g=this.j=this.O=this.h=this.ia=null}q(qi,Zh);
qi.prototype.b=function(){ri(this);2<=this.a.l.length&&(this.h=new Ch);this.O=null!=this.a.H?new Ah(this.a.H.Ga()):null;this.a.b&&(this.u=new Eh(this.a.b));null!=this.a.I&&0<this.a.I&&(this.M=new Ih(this.a.I));null!=this.a.K&&(this.s=new Hh(this.a.K));null!=this.a.c&&(this.j=new Gh(this.a.c));si(this);this.C=new Dh(this.a.a||[],this.a.c||null);var a=ti(this);return(new bi(a,this.a,this.Xa)).c()};
function ti(a){for(var b=[a.s,a.M,a.C,a.u,a.g,a.j,a.O,a.h],c=null,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:L(b[c],f),c=e)}a.ia.forEach(function(a){L(b[c],a)});return d}function ri(a){a.ia=a.a.l.map(function(a){return new Bh(a)},a)}function si(a){var b=a.a.a.filter(function(a){return a instanceof x});null!=a.a.b&&a.a.b.forEach(function(a){a.F instanceof x&&b.push(a.F)});0<b.length&&(a.g=new Fh(b))};function ui(a){Ce.call(this,a)}q(ui,Ce);ui.prototype.O=function(){var a=D();a.add(this.l);vi(this,this.l.getName(),a);return a};function vi(a,b,c){var d=wi(pd(a.S),b,1);wi(pd(a.S),b).forEach(c.add.bind(c));d.forEach(function(a){vi(this,a.getName(),c)},a)}ui.prototype.clone=function(){var a=new ui(this.S);Fe(a,this);a.l=this.l;return a};ui.prototype.bind=function(a){ui.na.bind.call(this,a);Ge(this,a);return this};function xi(a){Ce.call(this,a)}q(xi,Ce);xi.prototype.O=function(){var a=D();a.add(this.f);var b=pd(this.S);yi(this.f.getName(),b.j).forEach(a.add.bind(a));this.s&&wi(b,this.f.getName()).forEach(a.add.bind(a));return a};xi.prototype.clone=function(){var a=new xi(this.S);Fe(a,this);a.f=this.f;this.values&&(a.values=this.values instanceof Id?this.values:this.values.slice());a.s=this.s;a.u=this.u;return a};
xi.prototype.bind=function(a){xi.na.bind.call(this,a);this.u&&(this.u instanceof Id?this.values=a[this.u.da()]:this.values=this.u.map(function(b){return b instanceof Id?a[b.da()]:b}));return this};function zi(a){Ce.call(this,a)}q(zi,Ce);zi.prototype.O=function(){var a=D();a.add(this.table);var b=this.set.map(function(a){return a.F.o()}),c=pd(this.S);Ai(c,b).forEach(a.add.bind(a));Bi(c,b).forEach(a.add.bind(a));return a};zi.prototype.clone=function(){var a=new zi(this.S);Fe(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};zi.prototype.bind=function(a){zi.na.bind.call(this,a);this.set.forEach(function(b){-1!=b.Ya&&(b.value=a[b.Ya])});Ge(this,a);return this};function Ci(){this.b=[new Th,new Xh,new li,new ji];this.a=[new Th]};p("lf.fn.avg",function(a){return new x(a,"AVG")});function Di(a){return new x(a||new hc,"COUNT")}p("lf.fn.count",Di);function Ei(a){return new x(a,"DISTINCT")}p("lf.fn.distinct",Ei);p("lf.fn.max",function(a){return new x(a,"MAX")});p("lf.fn.min",function(a){return new x(a,"MIN")});p("lf.fn.stddev",function(a){return new x(a,"STDDEV")});p("lf.fn.sum",function(a){return new x(a,"SUM")});p("lf.fn.geomean",function(a){return new x(a,"GEOMEAN")});p("lf.fn.concat",function(a){return new x(a,"CONCAT")});
p("lf.fn.asArray",function(a){return new x(a,"AS_ARRAY")});function S(a,b){J.call(this);this.s=b}q(S,J);S.prototype.exec=function(a,b){switch(this.s){case 1:return Fi(this,a,b);case 0:return Gi(this,a,b);default:return Hi(this,a,b)}};S.prototype.toString=function(){return"dummy_node"};S.prototype.Wa=function(){return this.toString()};function Hi(a,b,c){return new t(function(a){a(this.c([],b,c))}.bind(a))}function Fi(a,b,c){return de(a,0).exec(b,c).then(function(a){return this.c(a,b,c)}.bind(a))}
function Gi(a,b,c){var d=K(a).map(function(a){return a.exec(b,c)});return qb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.c(d,b,c)}.bind(a))};function Ii(a){S.call(this,0,1);this.a=a}q(Ii,S);Ii.prototype.toString=function(){return"aggregation("+this.a.map(function(a){return a.o()}).toString()+")"};Ii.prototype.c=function(a){a.forEach(function(a){Ji(new Ki(a,this.a))},this);return a};function Ki(a,b){this.a=a;this.b=b}
function Ji(a){a.b.forEach(function(a){a=gc(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=gc(d).slice(-1)[0],f=d.ra instanceof x?me(this.a,d.ra):this.a;if(null!==f.a&&f.a.has(d.o()))break;f=Li(d.Ea,f,e);e=this.a;null===e.a&&(e.a=B());e.a.set(d.o(),f)}},a)}
function Li(a,b,c){var d=null;switch(a){case "MIN":d=Mi(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=Mi(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=Ni(b,c);break;case "COUNT":d=Oi(b,c);break;case "SUM":d=Pi(b,c);break;case "AVG":a=Oi(b,c);0<a&&(d=Pi(b,c)/a);break;case "GEOMEAN":d=Qi(b,c);break;case "CONCAT":d=Ri(b,c);break;case "AS_ARRAY":d=Si(b,c);break;default:d=Ti(b,c)}return d}
function Mi(a,b,c){return a.entries.reduce(function(a,e){var f=N(e,b);return null===f?a:null===a?f:c(a,f)},null)}function Oi(a,b){return b instanceof hc?a.entries.length:a.entries.reduce(function(a,d){return a+(null===N(d,b)?0:1)},0)}function Pi(a,b){return Mi(a,b,function(a,b){return b+a})}function Ri(a,b){return a.entries.reduce(function(a,d){return a+","+N(d,b)},"").substr(1)}function Si(a,b){return a.entries.map(function(a){return N(a,b)})}
function Ti(a,b){var c=[];a.entries.forEach(function(a){a=N(a,b);null===a||c.push(a)});return 0==c.length?null:$a.apply(null,c)}function Qi(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=N(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}function Ni(a,b){var c=B();a.entries.forEach(function(a){c.set(N(a,b),a)});return new M(C(c),a.B())};function Ui(){S.call(this,0,0)}q(Ui,S);Ui.prototype.toString=function(){return"cross_product"};Ui.prototype.c=function(a){var b=a[0],c=a[1];a=[];for(var d=b.B(),e=c.B(),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var k=we(b.entries[f],d,c.entries[h],e);a.push(k)}b=b.B().concat(c.B());return[new M(a,b)]};function Vi(a){S.call(this,0,1);this.a=a}q(Vi,S);Vi.prototype.toString=function(){return"delete("+this.a.getName()+")"};Vi.prototype.c=function(a,b){var c=a[0].entries.map(function(a){return a.aa});b.remove(this.a,c);return[oe()]};function Wi(a,b){S.call(this,0,-1);this.table=b;this.a=a.a(Mc)}q(Wi,S);Wi.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};Wi.prototype.c=function(){var a=this.a.get(ec(this.table)),b=new M([],[this.table.getName()]),c=Di(),a=a.ea().a;null===b.a&&(b.a=B());b.a.set(c.o(),a);return[b]};function Xi(a,b){S.call(this,0,-1);this.a=a.a(Lc);this.b=a.a(Mc);this.table=b}q(Xi,S);Xi.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.ja||(a+=" as "+this.table.ja);return a+")"};Xi.prototype.c=function(){var a=this.b.get(ec(this.table)).Ca();return[se(ag(this.a,a),[dc(this.table)])]};function Yi(a){this.c=a}q(Yi,th);Yi.prototype.b=function(a,b){this.a=a;if(!Zi(b))return a;var c=Mh(a,function(a){return a instanceof Xi})[0],d=new Wi(this.c,c.table);Rh(c,c,d,d);return this.a};function Zi(a){return 1==a.a.length&&1==a.l.length&&null==a.H&&null==a.K&&null==a.I&&null==a.c?(a=a.a[0],a instanceof x&&"COUNT"==a.Ea&&a.ra instanceof hc):!1};function $i(a){S.call(this,0,1);this.a=a}q($i,S);$i.prototype.toString=function(){return"groupBy("+this.a.map(function(a){return a.o()}).toString()+")"};$i.prototype.c=function(a){return aj(this,a[0])};function aj(a,b){var c=new ed,d=function(a){return this.a.map(function(b){return N(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return sc(c.a).map(function(a){return new M(c.get(a),b.B())},a)};function bj(a,b,c){S.call(this,0,0);this.u=a.a(Mc);this.j=a.a(Lc);this.L=b;this.a=c;this.b="eq"==this.L.c?cj:dj;this.h=null}q(bj,S);var cj=0,dj=2,ej=["hash","index_nested_loop","nested_loop"];bj.prototype.toString=function(){return"join(type: "+(this.a?"outer":"inner")+", impl: "+ej[this.b]+", "+this.L.toString()+")"};
bj.prototype.c=function(a){switch(this.b){case cj:return[hi(this.L,a[0],a[1],this.a)];case 1:return[ii(this.L,a[0],a[1],this.h,this.j)];default:var b=this.L,c=a[0];a=a[1];var d=this.a,e=[c,a];d||(e=ei(b,c,a));c=e[0];a=e[1];for(var e=[],f=c.B(),h=a.B(),k=c.entries.length,m=a.entries.length,z=m+256-1>>8,Y=0;Y<z;){for(var ga=0;ga<k;ga++){var sb=!1,Eb=N(c.entries[ga],b.a);if(null!==Eb)for(var fc=Math.min(Y+1<<8,m),Fb=Y<<8;Fb<fc;Fb++)if(b.h(Eb,N(a.entries[Fb],b.b))){var sb=!0,Yc=we(c.entries[ga],f,a.entries[Fb],
h);e.push(Yc)}d&&!sb&&e.push(gi(b,c.entries[ga],f))}Y++}b=c.B().concat(a.B());return[new M(e,b)]}};function fj(a,b){a.b=1;var c=a.u.get(b.da().o());a.h={Lb:b,Pb:b==a.L.a?a.L.b:a.L.a,index:c}};function gj(a){S.call(this,0,-1);this.a=a}q(gj,S);gj.prototype.toString=function(){return"no_op_step("+this.a[0].B().join(",")+")"};gj.prototype.c=function(){return this.a};function hj(){}q(hj,th);hj.prototype.b=function(a,b){this.a=a;if(!(1<b.l.length))return a;Mh(a,function(a){return a instanceof bj}).forEach(this.c,this);return this.a};hj.prototype.c=function(a){if("eq"==a.L.c&&!a.a){var b=function(b){if(!(b instanceof Xi))return null;b=dc(b.table)==dc(a.L.b.X())?a.L.b:a.L.a;return null===b.da()?null:b},c=b(de(a,0)),b=b(de(a,1));if(null!==c||null!==b){b=null===b?c:b;fj(a,b);var d=new M([],[dc(b.X())]);ge(a,new gj([d]),b==c?0:1)}}};function ij(a){ie.call(this);this.a=a;this.b=!1}q(ij,ie);g=ij.prototype;g.Ga=function(){return Kh(this,function(a){if(a instanceof ij){var b=new ij(a.a);b.b=a.b;a=a.N();b.$=a;return b}return a.Ga()})};g.pa=function(a){var b=a||[];he(this,function(a){a!=this&&a.pa(b)}.bind(this));a=D(b);return E(a)};g.B=function(a){var b=null!=a?a:D();he(this,function(a){a!=this&&a.B(b)}.bind(this));return b};g.eb=function(a){this.b!=a&&(this.b=a,this.a="and"==this.a?"or":"and",K(this).forEach(function(b){return b.eb(a)}))};
g.ab=function(a){var b=K(this).map(function(b){return b.ab(a)});return jj(this,b)};function jj(a,b){return"and"==a.a?pe(b):qe(b)}g.toString=function(){return"combined_pred_"+this.a.toString()};g.ub=function(){if("or"==this.a){var a=new $d;K(this).forEach(function(b){b=b.ub().Z();a.add(b)});return a}return new $d};function kj(a){var b=null;return K(a).every(function(a){if(!(a instanceof xe&&Ae(a)))return!1;null===b&&(b=a.F);return b.o()==a.F.o()})};function lj(a){a=a.map(function(a){return a.Z()});a=eb.apply(null,a);var b=[];db(a,function(a){b.push(a)});return b}function mj(a){this.b=a}mj.prototype.a=function(){return 1==this.b.a.length?[Wd()]:[this.b.a.map(function(){return Wd()})]};function nj(a,b){this.b=a;this.g=b;this.c=this.f=null}function oj(a,b){var c=B();sc(a.g.a).forEach(function(a){var e=this.g.get(a).map(function(a){return De(b,a)},this),f=new $d([Wd()]);e.forEach(function(a){f=ae(f,a.ub())});c.set(a,f)},a);return c}
nj.prototype.a=function(a){if(this.f==a)return this.c;for(var b=oj(this,a),c=this.b.a.length-1;0<=c;c--){var d=this.b.a[c];if(null!==(b.get(d.S.getName())||null))break;b.set(d.S.getName(),new $d([Wd()]))}this.c=1==this.b.a.length?C(b)[0].Z():lj(pj(this,b));this.f=a;return this.c};function pj(a,b){var c=B(),d=0;a.b.a.forEach(function(a){c.set(a.S.getName(),d);d++});return sc(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function qj(a,b){this.a=b;this.b=a.a(Mc)}function rj(a){a=a.b.get(ec(a.a));return Math.floor(.02*a.ea().a)}function sj(a,b,c){c=c.filter(a.c,a);if(0==c.length)return null;a=tj(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=uj(c,b);return h<d?(d=h,c):a},null)}
function tj(a,b){return a.a.a.map(function(a){a=new vj(this.b,a);wj(a,b);return a},a).filter(function(a){if(null===a.Da)a=!1;else{for(var b=!1,e=!0,f=0;f<a.ma.a.length;f++){var h=a.Da.has(a.ma.a[f].S.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}qj.prototype.c=function(a){return a instanceof xe?!Ae(a)||a.F.X()!=this.a||"in"==a.a&&a.value.length>rj(this)?!1:!0:a instanceof ij?"or"==a.a&&kj(a)&&de(a,0).F.X()==this.a?K(a).length<=rj(this):!1:!1};
function vj(a,b){this.c=a;this.ma=b;this.b=D(this.ma.a.map(function(a){return a.S.getName()}));this.a=this.Da=null}function xj(a){null===a.a&&(a.a=new nj(a.ma,a.Da));return a.a}function wj(a,b){b.forEach(function(a){var b=a.pa()[0].getName();this.b.has(b)&&(null===this.Da&&(this.Da=new ed),this.Da.set(b,a.N()))},a)}function uj(a,b){var c=xj(a).a(b),d=a.c.get(a.ma.o());return c.reduce(function(a,b){return a+d.Za(b)},0)};function yj(a,b,c,d){S.call(this,0,-1);this.u=a.a(Mc);this.index=b;this.j=c;this.h=d;this.b=this.a=!1}q(yj,S);yj.prototype.toString=function(){return"index_range_scan("+this.index.o()+", ?, "+(this.h?"reverse":"natural")+(this.a?", limit:?":"")+(this.b?", skip:?":"")+")"};yj.prototype.Wa=function(a){var b=this.toString(),c=this.j.a(a),b=b.replace("?",c.toString());this.a&&(b=b.replace("?",a.K.toString()));this.b&&(b=b.replace("?",a.I.toString()));return b};
yj.prototype.c=function(a,b,c){a=this.j.a(c);b=this.u.get(this.index.o());c=(1==a.length&&a[0]instanceof H&&Xd(a[0])?bg(b.get(a[0].l),!1,this.a?c.K:void 0,this.b?c.I:void 0):b.Ca(a,this.h,this.a?c.K:void 0,this.b?c.I:void 0)).map(function(a){return new ic(a,{})},this);return[se(c,[this.index.b])]};function zj(){S.call(this,0,0)}q(zj,S);zj.prototype.toString=function(){return"multi_index_range_scan()"};
zj.prototype.c=function(a){var b=B();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.aa.id(),a)})});var c=C(b);return[new M(c,a[0].B())]};function Aj(a){S.call(this,0,1);this.a=a}q(Aj,S);Aj.prototype.toString=function(){return"select(?)"};Aj.prototype.Wa=function(a){a=De(a,this.a);return this.toString().replace("?",a.toString())};Aj.prototype.c=function(a,b,c){return[De(c,this.a).ab(a[0])]};function Bj(a,b){S.call(this,0,1);this.b=a.a(Lc);this.a=b}q(Bj,S);Bj.prototype.toString=function(){return"table_access_by_row_id("+this.a.getName()+")"};Bj.prototype.c=function(a){return[se(ag(this.b,le(a[0])),[dc(this.a)])]};function Cj(a){this.c=a}q(Cj,th);Cj.prototype.b=function(a,b){this.a=a;Mh(a,function(a){return a instanceof Xi}).forEach(function(a){var d=Dj(a);if(0!=d.length){var e=sj(new qj(this.c,a.table),b,d.map(function(a){return De(b,a.a)}));if(null!==e){var f=B();d.forEach(function(a){f.set(a.a,a)},this);this.a=Ej(this,e,f,a)}}},this);return this.a};function Dj(a){var b=[];for(a=a.f;a;)a instanceof Aj&&b.push(a),a=a.f;return b}
function Ej(a,b,c,d){(null===b.Da?[]:b.Da.values()).map(function(a){return c.get(a)}).forEach(Nh);b=new yj(a.c,b.ma,xj(b),!1);a=new Bj(a.c,d.table);L(a,b);Rh(d,d,a,b);return b.la()};function Fj(a,b){S.call(this,0,-1);this.b=a.a(Mc);this.a=b}q(Fj,S);Fj.prototype.toString=function(){return"insert("+this.a.getName()+")"};Fj.prototype.c=function(a,b,c){Gj(this.a,c.values,this.b);a=this.a;var d=c.values;Cd(b,a);id(b.a,a,d);td(b.a,a,d,0);for(var e=0;e<d.length;e++)Ad(b,a,[null,d[e]]);return[se(c.values,[this.a.getName()])]};
function Gj(a,b,c){a=a.Fa.a;if(null===a?0:a.a[0].autoIncrement){var d=a.a[0].S.getName();c=c.get(a.o()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.w[d]||null==a.w[d])e++,a.w[d]=e})}}function Hj(a,b){S.call(this,0,-1);this.b=a.a(Mc);this.a=b}q(Hj,S);Hj.prototype.toString=function(){return"insert_replace("+this.a.getName()+")"};
Hj.prototype.c=function(a,b,c){Gj(this.a,c.values,this.b);a=this.a;var d=c.values;Cd(b,a);id(b.a,a,d);for(var e=0;e<d.length;e++){var f=d[e],h=null,k,m=a.Fa.a;if(null===m)k=null;else{k=b.a;var m=m.o(),z=f.qa(m);k=k.b.get(m).get(z);k=0==k.length?null:k[0]}null!=k?(h=b.c.get(k),f.$=k,ud(b.a,a,[[h,f]],0)):td(b.a,a,[f],0);Ad(b,a,[h,f])}return[se(c.values,[this.a.getName()])]};function Ij(){S.call(this,0,1)}q(Ij,S);Ij.prototype.toString=function(){return"limit(?)"};Ij.prototype.Wa=function(a){return this.toString().replace("?",a.K.toString())};Ij.prototype.c=function(a,b,c){a[0].entries.splice(c.K);return a};function Jj(a){S.call(this,0,1);this.b=a}q(Jj,S);Jj.prototype.toString=function(){return"order_by("+Ie(this.b)+")"};Jj.prototype.c=function(a){if(1==a.length){var b;b=a[0];for(var c=null,d=0;d<this.b.length;d++){var e=Ei(this.b[d].F);if(null!==b.a&&b.a.has(e.o())){c=e;break}}b=c;(null===b?a[0]:me(a[0],b)).entries.sort(this.a.bind(this))}else a.sort(this.h.bind(this));return a};
function Kj(a,b,c){var d=null,e=null,f=null,h=-1;do h++,f=a.b[h].F,d=a.b[h].ta,e=b(f),f=c(f);while(e==f&&h+1<a.b.length);a=e<f?-1:e>f?1:0;return 1==d?a:-a}Jj.prototype.h=function(a,b){return Kj(this,function(b){return b instanceof x?me(a,b):N(a.entries[a.entries.length-1],b)},function(a){return a instanceof x?me(b,a):N(b.entries[b.entries.length-1],a)})};Jj.prototype.a=function(a,b){return Kj(this,function(b){return N(a,b)},function(a){return N(b,a)})};function Lj(a,b){this.a=a;this.b=b}function Mj(a){return a.b.some(function(a){return a instanceof x},a)?Nj(a):Oj(a)}function Nj(a){if(1==a.b.length&&"DISTINCT"==a.b[0].Ea)return a=me(a.a,a.b[0]).entries.map(function(a){var b=new te(new ic(-1,{}),1<this.a.b.size);ve(b,this.b[0],N(a,this.b[0].ra));return b},a),new M(a,[]);var b=new te(new ic(-1,{}),1<a.a.b.size);a.b.forEach(function(a){var d=a instanceof x?me(this.a,a):N(this.a.entries[0],a);ve(b,a,d)},a);return new M([b],a.a.B())}
function Oj(a){var b=Array(a.a.entries.length),c=1<a.a.b.size;a.a.entries.forEach(function(a,e){b[e]=new te(new ic(a.aa.id(),{}),c);this.b.forEach(function(c){ve(b[e],c,N(a,c))},this)},a);return new M(b,a.a.B())}function Pj(a,b){var c=a.map(function(a){return Mj(new Lj(a,b)).entries[0]});return new M(c,a[0].B())};function Qj(a,b){S.call(this,0,1);this.a=a;this.b=b}q(Qj,S);Qj.prototype.toString=function(){var a="project("+this.a.toString();if(null!==this.b)var b=this.b.map(function(a){return a.o()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};Qj.prototype.c=function(a){0==a.length?a=[oe()]:1==a.length?(a=a[0],a=[0==this.a.length?a:Mj(new Lj(a,this.a))]):a=[Pj(a,this.a)];return a};function Rj(a){return a.a.some(function(a){return a instanceof x})||null!==a.b};function Sj(){S.call(this,0,1)}q(Sj,S);Sj.prototype.toString=function(){return"skip(?)"};Sj.prototype.Wa=function(a){return this.toString().replace("?",a.I.toString())};Sj.prototype.c=function(a,b,c){return[new M(a[0].entries.slice(c.I),a[0].B())]};function Tj(){}q(Tj,th);Tj.prototype.b=function(a,b){if(!n(b.K)&&!n(b.I))return a;var c=Uj(a);if(null===c)return a;Mh(a,function(a){return a instanceof Ij||a instanceof Sj}).forEach(function(a){a instanceof Ij?c.a=!0:c.b=!0;Nh(a)},this);return c.la()};function Uj(a){a=Mh(a,function(a){return a instanceof yj},function(a){return a instanceof Qj&&Rj(a)||a instanceof Jj||1!=K(a).length||a instanceof Aj});return 0<a.length?a[0]:null};function Vj(a){this.c=a}q(Vj,th);Vj.prototype.b=function(a,b){this.a=a;var c=Wj(this,b);if(0==c.length)return this.a;var d=null,e=null,f=0;do e=c[f++],d=Xj(this,e,b);while(null===d&&f<c.length);return null===d?this.a:this.a=Yj(this,e,d)};function Wj(a,b){return Mh(a.a,function(a){if(!(a instanceof Aj))return!1;a=De(b,a.a);return a instanceof ij&&"or"==a.a})}
function Xj(a,b,c){b=De(c,b.a);var d=b.B();if(1!=d.size)return null;var d=E(d)[0],e=new qj(a.c,d),f=null;return K(b).every(function(a){a=sj(e,c,[a]);null===a||(null===f?f=[a]:f.push(a));return null!==a})?f:null}function Yj(a,b,c){var d=Mh(a.a,function(a){return a instanceof Xi&&a.table.getName()==c[0].ma.b})[0],e=new Bj(a.c,d.table),f=new zj;L(e,f);c.forEach(function(a){a=new yj(this.c,a.ma,xj(a),!1);L(f,a)},a);Nh(b);Rh(d,d,e,f);return f.la()};function Zj(a){this.a=a}q(Zj,th);Zj.prototype.b=function(a,b){var c=ak(a,b);if(null===c)return a;var d;a:{var e=c;d=bk(de(c,0));if(null!==d){var f;f=c.b;for(var h=null,k=d.table.a,m=0;m<k.length&&null===h;m++)h=ck(k[m],f);f=h;if(null===f){d=e;break a}e=new yj(this.a,f.ma,new mj(f.ma),f.c);f=new Bj(this.a,d.table);L(f,e);Nh(c);e=Rh(d,d,f,e)}d=e}if(d==c)a:if(d=c,e=dk(de(c,0)),null!==e){f=ck(e.index,c.b);if(null===f)break a;e.h=f.c;d=Nh(c).parent}return d.la()};
function dk(a){a=Mh(a,function(a){return a instanceof yj},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function bk(a){a=Mh(a,function(a){return a instanceof Xi},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function ak(a,b){return n(b.b)?Mh(a,function(a){return a instanceof Jj})[0]:null}function ck(a,b){if(a.a.length!=b.length||!b.every(function(b,c){return b.F.getName()==a.a[c].S.getName()}))return null;var c=ek(b,a);return c[0]||c[1]?{ma:a,c:c[1]}:null}
function ek(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.ta?0:1)},0),d=b.a.reduce(function(a,b){return a<<1|(0==b.ta?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.a.length))-1]};function fk(a,b,c){this.a=a;this.b=b;this.c=c}function gk(a){a.c.forEach(function(a){this.a=a.b(this.a,this.b)},a);return a.a};function hk(a,b){S.call(this,0,1);this.a=a;this.b=b}q(hk,S);hk.prototype.toString=function(){return"update("+this.a.getName()+")"};hk.prototype.c=function(a,b){var c=a[0].entries.map(function(a){var b=this.a.b(a.aa.ga());this.b.forEach(function(a){b.w[a.F.getName()]=a.value},this);return b},this);Bd(b,this.a,c);return[oe()]};function ik(a){this.a=a;this.c=[new hj,new Cj(this.a),new Vj(this.a),new Zj(this.a),new Tj,new Yi(this.a)];this.b=[new Cj(this.a)]}function jk(a,b,c,d){a=Kh(b.la(),a.f.bind(a));null!=d&&(a=gk(new fk(a,c,d)));return new Gd(a,b.b)}
ik.prototype.f=function(a){if(a instanceof Dh)return new Qj(a.a,a.b);if(a instanceof Gh)return new $i(a.a);if(a instanceof Fh)return new Ii(a.a);if(a instanceof Eh)return new Jj(a.b);if(a instanceof Ih)return new Sj;if(a instanceof Hh)return new Ij;if(a instanceof Ah)return new Aj(a.L.N());if(a instanceof Ch)return new Ui;if(a instanceof Jh)return new bj(this.a,a.L,a.a);if(a instanceof Bh)return new Xi(this.a,a.table);if(a instanceof yh)return new Vi(a.table);if(a instanceof zh)return new hk(a.table,
a.a);if(a instanceof xh)return new Hj(this.a,a.table);if(a instanceof wh)return new Fj(this.a,a.table);throw new G(514);};function kk(a){this.a=new Ci;this.b=new ik(a)};function lk(){this.a=B()}function mk(a,b){var c=a.a.get(b.getName())||null;null===c&&(c=new nk,a.a.set(b.getName(),c));return c}function ok(a,b,c,d){c.forEach(function(a){a=mk(this,a);0==d?(a.b=null,a.f=b):3==d?(null===a.c&&(a.c=D()),a.c.add(b),null===a.a&&(a.a=D()),a.a.delete(b)):1==d?(null===a.a&&(a.a=D()),a.a.add(b)):2==d&&(a.b=b)},a)}
function pk(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=mk(this,a);var c=null===a.a||0==a.a.size;e=0==d?(null===a.c||0==a.c.size)&&c&&null===a.f&&null!==a.b&&a.b==b:3==d?null===a.f&&null===a.b&&null!==a.a&&a.a.has(b):1==d?null===a.b:c&&(null===a.b||a.b==b)}},a);return e}function qk(a,b,c,d){var e=pk(a,b,c,d);e&&ok(a,b,c,d);return e}function rk(a,b,c){c.forEach(function(a){a=mk(this,a);a.f==b&&(a.f=null);a.b==b&&(a.b=null);null===a.a||a.a.delete(b);null===a.c||a.c.delete(b)},a)}
function sk(a,b){b.forEach(function(a){mk(this,a).b=null},a)}function nk(){this.c=this.a=this.b=this.f=null};function tk(){this.b=new uk;this.a=new lk}function Pe(a,b){(2>b.Aa()||2>b.Aa())&&sk(a.a,b.sa());vk(a.b,b);wk(a);return b.Ha().a}function wk(a){for(var b=a.b.Z(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.G()?xk(a,d,1,3):xk(a,d,2,0))a.b.remove(d),e=a,d.exec().then(e.f.bind(e,d),e.c.bind(e,d))}}function xk(a,b,c,d){var e=!1;qk(a.a,b.N(),b.sa(),c)&&(e=qk(a.a,b.N(),b.sa(),d));return e}tk.prototype.f=function(a,b){rk(this.a,a.N(),a.sa());a.Ha().resolve(b);wk(this)};
tk.prototype.c=function(a,b){rk(this.a,a.N(),a.sa());a.Ha().b(b);wk(this)};function uk(){this.a=[]}function vk(a,b){gg(a.a,b,function(a,b){var e=a.Aa()-b.Aa();return 0==e?a.N()-b.N():e})}uk.prototype.Z=function(){return this.a.slice()};uk.prototype.remove=function(a){var b=this.a;a=ua(b,a);var c;(c=0<=a)&&ta.splice.call(b,a,1);return c};function yk(a,b){var c=a.a(F),d=b||{},e=new Zf(c);a.b(Lc,e);var e=null,f=!1;null!=d.storeType?e=d.storeType:(e=qc(),e=e.b?0:e.g?4:1);switch(e){case 0:e=new uf(a,c);break;case 1:e=new Bf(c);break;case 5:e=new Df(c);break;case 4:e=new Mf(a,c,d.webSqlDbSize);break;case 3:e=new cf(c,d.firebase);f=!0;break;default:throw new G(300);}a.b(Kc,e);var h=new rh;a.b(Mc,h);return e.Ja(d.onUpgrade).then(function(){var b=new kk(a);a.b(Nc,b);b=new tk;a.b(Oc,b);b=new Vf;a.b(Pc,b);return sh(h,c)}).then(function(){if(f){var b=
new Qe(a);b.a.Sa(b.f.bind(b))}d.enableInspector&&(window.top["#lfInspect"]=lh);return bh(new ah(a),c)})};function zk(a){return Ak("and",Array.prototype.slice.call(arguments))}p("lf.op.and",zk);p("lf.op.or",function(a){return Ak("or",Array.prototype.slice.call(arguments))});function Ak(a,b){var c=new ij(a);b.forEach(function(a){L(c,a)});return c}p("lf.op.not",function(a){a.eb(!0);return a});function Bk(a,b,c){return null===b?new xe(a,b,c):n(b.o)?new di(a,b,c):new xe(a,b,c)};function Ck(a){this.a=a;this.m=a.a(F);this.c=D(this.m.a());this.b=v()}function Dk(a){var b=a.a.a(Mc),c=a.a.a(Lc),d={};a.m.a().forEach(function(a){var f=b.get(ec(a)).Ca(),f=ag(c,f).map(function(a){return a.w});d[a.getName()]=f});return{name:a.m.name(),version:a.m.version(),tables:d}}g=Ck.prototype;g.exec=function(){var a=Dk(this),a=new te(new ic(-1,a),!0);return u([new M([a],[])])};g.G=function(){return 0};g.sa=function(){return this.c};g.Ha=function(){return this.b};g.N=function(){return ha(this)};
g.Aa=function(){return 0};function Ek(a,b){this.h=a;this.m=a.a(F);this.c=D(this.m.a());this.j=v();this.a=b;this.b=a.a(Kc);this.g=a.a(Lc);this.f=a.a(Mc)}g=Ek.prototype;g.exec=function(){if(!(this.b instanceof uf||this.b instanceof Bf||this.b instanceof Mf))throw new G(300);var a;a:{a=this.m.a();for(var b=0;b<a.length;++b)if(0<this.f.get(ec(a[b])).ea().a){a=!1;break a}a=!0}if(!a)throw new G(110);if(this.m.name()!=this.a.name||this.m.version()!=this.a.version)throw new G(111);if(null==this.a.tables)throw new G(112);return Fk(this)};
g.G=function(){return 1};g.sa=function(){return this.c};g.Ha=function(){return this.j};g.N=function(){return ha(this)};g.Aa=function(){return 0};function Fk(a){var b=new zd(a.h,a.c),b=a.b.Ba(a.G(),E(a.c),b),c;for(c in a.a.tables){var d=a.m.table(c),e=a.a.tables[c].map(function(a){return d.f(a)}),f=b.a(c,d.b,0);$f(a.g,c,e);var h=a.f.a.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.qa(b.getName());b.add(c,a.id())})});f.put(e)}return b.V()};function Gk(a,b){this.j=a;this.u=a.a(Kc);this.s=a.a(Oc);this.C=a.a(Pc);this.c=D(b);this.b=new zd(this.j,this.c);this.f=v();this.a=v();this.h=v()}g=Gk.prototype;g.exec=function(){this.h.resolve();return this.a.a};g.G=function(){return 1};g.sa=function(){return this.c};g.Ha=function(){return this.f};g.N=function(){return ha(this)};g.Aa=function(){return 2};function Hk(a){Pe(a.s,a);return a.h.a}
function Ik(a,b){var c=b.Qa();return c.pb.la().exec(a.b,c.context).then(function(a){return ke(a[0])},function(a){Fd(this.b);var b=new wb(a.name);this.a.b(b);throw a;}.bind(a))}g.V=function(){this.g=this.u.Ba(this.G(),E(this.c),this.b);this.g.V().then(function(){var a=Oe(this.C,this.c);0!=a.length&&(a=new Le(this.j,a),Pe(this.s,a));this.a.resolve()}.bind(this),function(a){Fd(this.b);this.a.b(a)}.bind(this));return this.f.a};function Jk(a){Fd(a.b);a.a.resolve();return a.f.a}
g.Cb=function(){var a=null;null!=this.g&&(a=Ac(this.g));return null===a?new y(!1,0,0,0,0):a};function Kk(a,b){Je.call(this,a,b);this.C=a.a(Oc);this.h=a.a(Pc)}q(Kk,Je);Kk.prototype.Aa=function(){return 2};Kk.prototype.ob=function(a){0==this.G()?Lk(this,a):(a=Oe(this.h,this.sa()),0!=a.length&&(a=new Le(this.g,a),Pe(this.C,a)))};function Lk(a,b){a.a.forEach(function(a,d){a instanceof He&&Me(this.h,a,b[d])},a)};function T(a){this.c=a;this.s=a.a(Oc);this.a=null;this.b=Mk;0==Nk.size&&(Nk.set(Mk,D([1,4])),Nk.set(1,D([2])),Nk.set(2,D([3,5,6])),Nk.set(3,D([2,7])),Nk.set(4,D([7])),Nk.set(5,D([7])),Nk.set(6,D([7])))}p("lf.proc.Transaction",T);var Mk=0,Nk=B();function Ok(a,b){var c=Nk.get(a.b)||null;if(null===c||!c.has(b))throw new G(107,a.b,b);a.b=b}
T.prototype.exec=function(a){Ok(this,4);var b=[];try{a.forEach(function(a){a.g();b.push(a.Qa())},this)}catch(c){return Ok(this,7),nb(c)}this.a=new Kk(this.c,b);return Pe(this.s,this.a).then(function(a){Ok(this,7);return a.map(function(a){return ke(a)})}.bind(this),function(a){Ok(this,7);throw a;}.bind(this))};T.prototype.exec=T.prototype.exec;T.prototype.g=function(a){Ok(this,1);this.a=new Gk(this.c,a);return Hk(this.a).then(function(){Ok(this,2)}.bind(this))};T.prototype.begin=T.prototype.g;
T.prototype.f=function(a){Ok(this,3);return Ik(this.a,a).then(function(a){Ok(this,2);return a}.bind(this),function(a){Ok(this,7);throw a;}.bind(this))};T.prototype.attach=T.prototype.f;T.prototype.V=function(){Ok(this,5);return this.a.V().then(function(){Ok(this,7)}.bind(this))};T.prototype.commit=T.prototype.V;T.prototype.h=function(){Ok(this,6);return Jk(this.a).then(function(){Ok(this,7)}.bind(this))};T.prototype.rollback=T.prototype.h;T.prototype.j=function(){if(7!=this.b)throw new G(105);return this.a.Cb()};
T.prototype.stats=T.prototype.j;function Pk(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+mc(b)+"'";default:return"'"+b.toString()+"'"}}function Qk(a,b){var c=a.s?"INSERT OR REPLACE":"INSERT",d=a.f.pa(),c=c+(" INTO "+a.f.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.w[c.getName()];return b?null!=d?"#":"NULL":Pk(c.G(),d)});return c+f.join(", ")+");"}).join("\n")}
function Rk(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Sk(a,b,c,d){return a instanceof Id?"?"+a.da().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Pk(c,a)}).join(", ")+")":"between"==b?Pk(c,a[0])+" AND "+Pk(c,a[1]):Pk(c,a).toString()}
function Tk(a,b){return K(a).map(function(a){return"("+Uk(a,b)+")"}).join("and"==a.a?" AND ":" OR ")}function Vk(a){return[a.a.o(),Rk(a.c),a.b.o()].join(" ")}function Uk(a,b){if(a instanceof xe){var c=a.F.o(),d=Rk(a.a),e=Sk(a.value,a.a,a.F.G(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof ij)return Tk(a,b);if(a instanceof di)return Vk(a);throw new G(357,typeof a);}
function Wk(a,b){var c=Uk(a,b);return c?" WHERE "+c:""}function Xk(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.F.o()+" = ";return-1!=a.Ya?b+"?"+a.Ya.toString():b+Pk(a.F.G(),a.value).toString()}).join(", ");a.H&&(c+=Wk(a.H,b));return c+";"}
function Yk(a,b){var c="*";a.a.length&&(c=a.a.map(function(a){return a.Ka()?a.o()+" AS "+a.Ka():a.o()}).join(", "));c="SELECT "+c+" FROM ";null!=a.g&&0!=a.g.size?c+=Zk(a,b):(c+=a.l.map($k).join(", "),a.H&&(c+=Wk(a.H,b)));if(a.b)var d=a.b.map(function(a){return a.F.o()+(0==a.ta?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.c&&(d=a.c.map(function(a){return a.o()}).join(", "),c+=" GROUP BY "+d);a.K&&(c+=" LIMIT "+a.K.toString());a.I&&(c+=" SKIP "+a.I.toString());return c+";"}
function $k(a){return dc(a)!=a.getName()?a.getName()+" AS "+dc(a):a.getName()}function Zk(a,b){for(var c=Mh(a.H,function(a){return a instanceof di}),d=c.map(Vk),e=$k(a.l[0]),f=1;f<a.l.length;f++)var h=$k(a.l[f]),e=a.g.has(c[d.length-f].N())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=de(a.H,0);c instanceof di||(e+=" WHERE "+Uk(c,b));return e}
function al(a,b){var c=b||!1,d=a.a.clone();if(d instanceof xi)return Qk(d,c);if(d instanceof ui){var e="DELETE FROM "+d.l.getName();d.H&&(e+=Wk(d.H,c));return e+";"}if(d instanceof zi)return Xk(d,c);if(d instanceof He)return Yk(d,c);throw new G(358,typeof d);};function U(a,b){this.j=a;this.Xa=a.a(Nc);this.M=a.a(Oc);this.a=b}p("lf.query.BaseBuilder",U);U.prototype.exec=function(){try{this.g()}catch(a){return nb(a)}return new t(function(a,b){var c=new Kk(this.j,[this.Qa()]);Pe(this.M,c).then(function(b){a(ke(b[0]))},b)},this)};U.prototype.exec=U.prototype.exec;U.prototype.u=function(){var a=function(a){return a.Wa(this.a)+"\n"}.bind(this);return Sh(Yf(this).la(),a)};U.prototype.explain=U.prototype.u;U.prototype.bind=function(a){this.a.bind(a);return this};
U.prototype.bind=U.prototype.bind;U.prototype.fb=function(a){return al(this,a)};U.prototype.toSql=U.prototype.fb;U.prototype.g=function(){};
function Yf(a){if(null==a.s){var b,c=a.Xa;b=a.a;var d;d=c.a;var e=null;if(b instanceof xi)e=new $h(b);else if(b instanceof ui)e=new ci(b,d.a);else if(b instanceof He)e=new qi(b,d.b);else if(b instanceof zi)e=new ai(b);else throw new G(513);d=e.c();d=new uh(d,b.O());c=c.b;e=d.la();if(e instanceof xh||e instanceof wh)b=jk(c,d,b);else if(e instanceof Dh||e instanceof Hh||e instanceof Ih)b=jk(c,d,b,c.c);else if(e instanceof yh||e instanceof zh)b=jk(c,d,b,c.b);else throw new G(8);a.s=b}return a.s}
U.prototype.Qa=function(){return{context:this.a.clone(),pb:Yf(this)}};function bl(a){U.call(this,a,new ui(a.a(F)))}q(bl,U);p("lf.query.DeleteBuilder",bl);bl.prototype.l=function(a){if(null!=this.a.l)throw new G(515);this.a.l=a;return this};bl.prototype.from=bl.prototype.l;bl.prototype.b=function(a){if(null==this.a.l)throw new G(548);if(null!=this.a.H)throw new G(516);this.a.H=a;return this};bl.prototype.where=bl.prototype.b;bl.prototype.g=function(){bl.na.g.call(this);if(null==this.a.l)throw new G(517);};function cl(a,b){U.call(this,a,new xi(a.a(F)));this.a.s=b||!1}q(cl,U);p("lf.query.InsertBuilder",cl);cl.prototype.g=function(){cl.na.g.call(this);var a=this.a;if(null==a.f||null==a.values)throw new G(518);if(a.s&&null===a.f.Fa.a)throw new G(519);};cl.prototype.f=function(a){if(null!=this.a.f)throw new G(520);this.a.f=a;return this};cl.prototype.into=cl.prototype.f;
cl.prototype.values=function(a){if(null!=this.a.values)throw new G(521);a instanceof Id||a.some(function(a){return a instanceof Id})?this.a.u=a:this.a.values=a;return this};cl.prototype.values=cl.prototype.values;function V(a,b){U.call(this,a,new He(a.a(F)));this.h=this.f=!1;this.a.a=b;dl(this);el(this)}q(V,U);p("lf.query.SelectBuilder",V);V.prototype.g=function(){V.na.g.call(this);var a=this.a;if(null==a.l)throw new G(522);if(n(a.h)&&!n(a.K)||n(a.j)&&!n(a.I))throw new G(523);null!=this.a.c?fl(this):gl(this)};function dl(a){var b=a.a.a.filter(function(a){return a instanceof x&&"DISTINCT"==a.Ea},a);if(0!=b.length&&(1!=b.length||1!=a.a.a.length))throw new G(524);}
function fl(a){var b=a.a.a.filter(function(a){return!(a instanceof x)}).map(function(a){return a.o()}),c=!1;if(0==a.a.c.length||0==a.a.a.length)c=!0;else{var d=a.a.c.map(function(a){return a.o()});(c=b.every(function(a){return-1==d.indexOf(a)}))||(c=a.a.c.some(function(a){a=a.G();return 6==a||0==a}))}if(c)throw new G(525);}function gl(a){var b=a.a.a.some(function(a){return a instanceof x},a);a=a.a.a.some(function(a){return!(a instanceof x)},a)||0==a.a.a.length;if(b&&a)throw new G(526);}
function el(a){a.a.a.forEach(function(a){if(a instanceof x&&!hl(a.Ea,a.G()))throw new G(527,a.o());},a)}function il(a,b){if(null==a.a.l)throw new G(b);}V.prototype.l=function(a){if(this.h)throw new G(515);this.h=!0;null==this.a.l&&(this.a.l=[]);this.a.l.push.apply(this.a.l,Array.prototype.slice.call(arguments));return this};V.prototype.from=V.prototype.l;V.prototype.ia=function(a){il(this,548);if(this.f)throw new G(516);this.f=!0;jl(this,a);return this};V.prototype.where=V.prototype.ia;
function jl(a,b){if(null!=a.a.H){var c=zk(b,a.a.H);a.a.H=c}else a.a.H=b}V.prototype.C=function(a,b){il(this,542);if(this.f)throw new G(547);this.a.l.push(a);jl(this,b);return this};V.prototype.innerJoin=V.prototype.C;V.prototype.O=function(a,b){il(this,542);if(!(b instanceof di))throw new G(541);if(this.f)throw new G(547);this.a.l.push(a);null==this.a.g&&(this.a.g=D());var c=b;dc(a)!=dc(b.b.X())&&(c=b.reverse());this.a.g.add(c.N());jl(this,c);return this};V.prototype.leftOuterJoin=V.prototype.O;
V.prototype.K=function(a){if(null!=(this.a.K||this.a.h))throw new G(528);if(a instanceof Id)this.a.h=a;else{if(0>a)throw new G(531);this.a.K=a}return this};V.prototype.limit=V.prototype.K;V.prototype.I=function(a){if(null!=(this.a.I||this.a.j))throw new G(529);if(a instanceof Id)this.a.j=a;else{if(0>a)throw new G(531);this.a.I=a}return this};V.prototype.skip=V.prototype.I;V.prototype.b=function(a,b){il(this,549);null==this.a.b&&(this.a.b=[]);this.a.b.push({F:a,ta:null!=b?b:1});return this};
V.prototype.orderBy=V.prototype.b;V.prototype.c=function(a){il(this,549);if(null!=this.a.c)throw new G(530);null==this.a.c&&(this.a.c=[]);this.a.c.push.apply(this.a.c,Array.prototype.slice.call(arguments));return this};V.prototype.groupBy=V.prototype.c;function hl(a,b){switch(a){case "COUNT":case "DISTINCT":case "AS_ARRAY":case "CONCAT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
V.prototype.clone=function(){var a=new V(this.j,this.a.a);a.a=this.a.clone();a.a.C=null;return a};V.prototype.clone=V.prototype.clone;function kl(a,b){U.call(this,a,new zi(a.a(F)));this.a.table=b}q(kl,U);p("lf.query.UpdateBuilder",kl);kl.prototype.set=function(a,b){var c={Ya:b instanceof Id?b.da():-1,F:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};kl.prototype.set=kl.prototype.set;kl.prototype.b=function(a){if(null!=this.a.H)throw new G(516);this.a.H=a;return this};kl.prototype.where=kl.prototype.b;
kl.prototype.g=function(){kl.na.g.call(this);if(null==this.a.set)throw new G(532);if(this.a.set.some(function(a){return a.value instanceof Id}))throw new G(501);};function W(a){this.a=a;this.m=a.a(F);this.b=!1}p("lf.proc.Database",W);W.prototype.f=function(a){this.a.b(F,this.m);return yk(this.a,a).then(function(){this.b=!0;this.c=this.a.a(Oc);return this}.bind(this))};W.prototype.init=W.prototype.f;W.prototype.xa=function(){return this.m};W.prototype.getSchema=W.prototype.xa;function ll(a){if(!a.b)throw new G(2);}W.prototype.O=function(a){ll(this);return new V(this.a,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.O;W.prototype.s=function(){ll(this);return new cl(this.a)};W.prototype.insert=W.prototype.s;W.prototype.u=function(){ll(this);return new cl(this.a,!0)};W.prototype.insertOrReplace=W.prototype.u;W.prototype.M=function(a){ll(this);return new kl(this.a,a)};W.prototype.update=W.prototype.M;W.prototype.delete=function(){ll(this);return new bl(this.a)};W.prototype["delete"]=W.prototype.delete;W.prototype.C=function(a,b){ll(this);this.a.a(Pc).gb(a,b)};W.prototype.observe=W.prototype.C;
W.prototype.ia=function(a,b){ll(this);this.a.a(Pc).qb(a,b)};W.prototype.unobserve=W.prototype.ia;W.prototype.g=function(){ll(this);return new T(this.a)};W.prototype.createTransaction=W.prototype.g;W.prototype.close=function(){try{this.a.a(Kc).close()}catch(a){}this.a.clear();this.b=!1};W.prototype.close=W.prototype.close;W.prototype.h=function(){ll(this);var a=new Ck(this.a);return Pe(this.c,a).then(function(a){return ke(a[0])[0]})};W.prototype["export"]=W.prototype.h;
W.prototype.j=function(a){ll(this);a=new Ek(this.a,a);return Pe(this.c,a).then(function(){return null})};W.prototype["import"]=W.prototype.j;t.prototype.u=t.prototype.tb;t.prototype["catch"]=t.prototype.u;function X(a,b,c,d,e,f){this.c=a;this.D=b;this.g=c;this.f=d;this.s=e;this.ja=f||null}p("lf.schema.BaseColumn",X);g=X.prototype;g.getName=function(){return this.D};g.o=function(){return dc(this.c)+"."+this.D};g.toString=function(){return this.o()};g.X=function(){return this.c};g.G=function(){return this.s};X.prototype.getType=X.prototype.G;X.prototype.Ka=function(){return this.ja};
X.prototype.mb=function(){null==this.b&&(this.b=[],this.X().a.forEach(function(a){-1!=a.a.map(function(a){return a.S.getName()}).indexOf(this.D)&&this.b.push(a)},this));return this.b};X.prototype.da=function(){if(!n(this.a)){var a=this.mb().filter(function(a){return 1!=a.a.length?!1:a.a[0].S.getName()==this.getName()},this);0<a.length?this.a=a[0]:this.a=null}return this.a};X.prototype.Ia=function(){return this.f};X.prototype.isNullable=X.prototype.Ia;X.prototype.Ra=function(){return this.g};
X.prototype.h=function(a){return Bk(this,a,"eq")};X.prototype.eq=X.prototype.h;X.prototype.j=function(a){return Bk(this,a,"neq")};X.prototype.neq=X.prototype.j;X.prototype.Hb=function(a){return Bk(this,a,"lt")};X.prototype.lt=X.prototype.Hb;X.prototype.Ib=function(a){return Bk(this,a,"lte")};X.prototype.lte=X.prototype.Ib;X.prototype.C=function(a){return Bk(this,a,"gt")};X.prototype.gt=X.prototype.C;X.prototype.O=function(a){return Bk(this,a,"gte")};X.prototype.gte=X.prototype.O;
X.prototype.fb=function(a){return Bk(this,a,"match")};X.prototype.match=X.prototype.fb;X.prototype.u=function(a,b){return Bk(this,[a,b],"between")};X.prototype.between=X.prototype.u;X.prototype.M=function(a){return Bk(this,a,"in")};X.prototype["in"]=X.prototype.M;X.prototype.Xa=function(){return this.h(null)};X.prototype.isNull=X.prototype.Xa;X.prototype.ia=function(){return this.j(null)};X.prototype.isNotNull=X.prototype.ia;
X.prototype.Gb=function(a){return new X(this.c,this.D,this.g,this.f,this.s,a)};X.prototype.as=X.prototype.Gb;function ml(a){this.m=a;this.a=new ed;this.b=new ed;this.j=new ed;this.g=B();this.h=new ed;this.c=new ed;this.s=new ed;this.f=new ed;nl(this)}function nl(a){a.m.a().forEach(function(a){var c=a.getName();a.Fa.b.forEach(function(d){this.j.set(c,this.m.table(d.ka));this.h.set(d.ka,a);0==d.c?(this.b.set(d.ka,d),this.s.set(d.ka,a)):(this.a.set(d.ka,d),this.c.set(d.ka,a));this.g.set(a.getName()+"."+d.ua,d.ka);this.f.set(d.ka+"."+d.b,a.getName())},this)},a)}
function od(a,b,c){if(null!=c)return 1==c?a.a.get(b):a.b.get(b);c=a.a.get(b);a=a.b.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function yi(a,b){var c=b.get(a);return null===c?[]:c}function Ai(a,b){var c=D();b.forEach(function(a){(a=this.g.get(a))&&c.add(a)},a);return E(c).map(function(a){return this.m.table(a)},a)}function wi(a,b,c){return null!=c?0==c?yi(b,a.s):yi(b,a.c):yi(b,a.h)}
function Bi(a,b){var c=D();b.forEach(function(a){(a=this.f.get(a))&&a.forEach(function(a){c.add(a)})},a);return E(c).map(function(a){return this.m.table(a)},a)};function ol(a,b,c){this.a=a;this.g=b;this.b=c}p("lf.schema.Constraint",ol);ol.prototype.f=function(){return this.a};ol.prototype.getPrimaryKey=ol.prototype.f;ol.prototype.c=function(){return this.b};ol.prototype.getForeignKeys=ol.prototype.c;function pl(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new G(540,c);this.f=b;this.ua=a.local;this.ka=d[0];this.b=d[1];this.name=b+"."+c;this.c=a.action;this.a=a.timing};function Z(a){ql(a);this.M=Qd();this.D=a;this.b=B();this.f=D();this.c=D();this.bb=D();this.fa=null;this.a=B();this.j=!1;this.wa=[]}p("lf.schema.TableBuilder",Z);function rl(a){this.name=a.name;this.ta=a.order;this.autoIncrement=a.autoIncrement}var sl=D([0,6]);function ql(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new G(502,a);}function tl(a,b){if(b==a.D)throw new G(546,b);if(a.b.has(b)||a.a.has(b)||a.c.has(b))throw new G(503,a.D+"."+b);}
function ul(a,b){var c=!1;b.forEach(function(a){var b=this.b.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new G(504);},a);if(c&&1<b.length)throw new G(505);}function vl(a){if(null!==a.fa){var b=a.a.get(a.fa).map(function(a){return a.name}),c=0;if(a.wa.some(function(a,e){c=e;return-1!=b.indexOf(a.ua)},a))throw new G(543,a.wa[c].name);}}
function wl(a){if(null!==a.fa){var b=function(a){return a.name},c=JSON.stringify(a.a.get(a.fa).map(b));a.a.forEach(function(a,e){if(e!=this.fa){var f=a.map(b);if(JSON.stringify(f)==c)throw new G(544,this.D+"."+e);}},a)}}function xl(a){null===a.fa||a.a.get(a.fa).forEach(function(a){if(this.bb.has(a.name))throw new G(545,this.D+"."+a.name);},a)}Z.prototype.s=function(a,b){ql(a);tl(this,a);this.b.set(a,b);sl.has(b)&&this.h([a]);return this};Z.prototype.addColumn=Z.prototype.s;
Z.prototype.C=function(a,b){var c=this.D;this.fa="pk"+(c[0].toUpperCase()+c.substring(1));ql(this.fa);tl(this,this.fa);c=yl(this,a,!0,void 0,b);ul(this,c);1==c.length&&this.f.add(c[0].name);this.c.add(this.fa);this.a.set(this.fa,c);return this};Z.prototype.addPrimaryKey=Z.prototype.C;
Z.prototype.u=function(a,b){ql(a);tl(this,a);var c=new pl(b,this.D,a);n(c.c)||(c.c=0);n(c.a)||(c.a=0);if(1==c.c&&1==c.a)throw new G(506);if(!this.b.has(c.ua))throw new G(540,a);this.wa.push(c);this.g(a,[c.ua],this.f.has(c.ua));return this};Z.prototype.addForeignKey=Z.prototype.u;Z.prototype.O=function(a,b){ql(a);tl(this,a);var c=yl(this,b,!0);1==c.length&&(this.f.add(c[0].name),zl(this,c[0].name));this.a.set(a,c);this.c.add(a);return this};Z.prototype.addUnique=Z.prototype.O;
function zl(a,b){a.wa.forEach(function(a){a.ua==b&&this.c.add(a.name.split(".")[1])},a)}Z.prototype.h=function(a){yl(this,a,!1).forEach(function(a){this.bb.add(a.name)},this);return this};Z.prototype.addNullable=Z.prototype.h;Z.prototype.g=function(a,b,c,d){ql(a);tl(this,a);b=yl(this,b,!0,d);c&&this.c.add(a);this.a.set(a,b);return this};Z.prototype.addIndex=Z.prototype.g;Z.prototype.ia=function(a){this.j=a};Z.prototype.persistentIndex=Z.prototype.ia;
Z.prototype.xa=function(){vl(this);wl(this);xl(this);return new (Al(this))};Z.prototype.getSchema=Z.prototype.xa;function Bl(a){return a.wa}function yl(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new rl({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new rl(a)});f.forEach(function(a){if(!this.b.has(a.name))throw new G(508,this.D,a.name);if(c){var b=this.b.get(a.name);if(0==b||6==b)throw new G(509,this.D,a.name);}},a);return f}
function Al(a){function b(){function b(c){return a.a.get(c).map(function(a){return{S:this[a.name],ta:a.ta,autoIncrement:a.autoIncrement}},this)}var d=sc(a.b).map(function(b){this[b]=new X(this,b,a.f.has(b),a.bb.has(b),a.b.get(b));return this[b]},this),e=sc(a.a).map(function(d){return new bc(a.D,d,a.c.has(d),b.call(this,d))},this);w.call(this,a.D,d,e,a.j);var f=null===a.fa?null:new bc(a.D,a.fa,!0,b.call(this,a.fa)),h=d.filter(function(b){return!a.bb.has(b.getName())});this.Fa=new ol(f,h,a.wa);this.j=
Cl(a,d,e)}q(b,w);b.prototype.f=function(a){return new this.j(jc++,a)};b.prototype.createRow=b.prototype.f;b.prototype.b=function(a){var b={};this.pa().forEach(function(e){var f=e.getName();e=e.G();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),m=0,z=0;m<e.length;m+=2)k[z++]=parseInt(e.substr(m,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.j(a.id,b)};b.prototype.deserializeRow=
b.prototype.b;b.prototype.g=function(){return this.Fa};b.prototype.getConstraint=b.prototype.g;return b}
function Cl(a,b,c){function d(a,c){this.a=b;ic.call(this,a,c)}q(d,ic);d.prototype.xb=function(){var a={};this.a.forEach(function(b){a[b.getName()]=b.Ia()?null:$b[b.G()]});return a};d.prototype.Fb=function(){var a={};this.a.forEach(function(b){var c=b.getName();b=b.G();var d=this.w[c];a[c]=0==b?null!=d?mc(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.b.get(a.getName()),c=this.M.b.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.S)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.o();a=1==a.a.length?e(a.a[0].S):f(a.a);h[b]=a});d.prototype.qa=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.w):null};return d};function Dl(a,b){this.m=new El(a,b);this.a=B();this.b=!1;this.c=null}p("lf.schema.Builder",Dl);function Fl(a,b){b.wa.forEach(function(a){var d=a.ka;if(!this.a.has(d))throw new G(536,a.name);var d=this.a.get(d).xa(),e=a.b;if(!d.hasOwnProperty(e))throw new G(537,a.name);if(b.xa()[a.ua].G()!=d[e].G())throw new G(538,a.name);if(!d[e].Ra())throw new G(539,a.name);},a)}
Dl.prototype.g=function(a){a.wa.forEach(function(a){Bl(this.a.get(a.ka)).forEach(function(c){if(c.ua==a.b)throw new G(534,a.name);},this)},this)};function Gl(a){a.b||(a.a.forEach(function(a){Fl(this,a);a=a.xa();this.m.Ta.set(a.getName(),a)},a),C(a.a).forEach(a.g,a),Hl(a),a.a.clear(),a.b=!0)}function Il(a,b,c){b.vb||(b.vb=!0,b.nb=!0,b.yb.forEach(function(a){a=c.get(a);if(!a.vb)Il(this,a,c);else if(a.nb&&b!=a)throw new G(533);},a));b.nb=!1}
function Hl(a){var b=B();a.m.Ta.forEach(function(a,d){b.set(d,new Jl)},a);a.a.forEach(function(a,d){a.wa.forEach(function(a){b.get(a.ka).yb.add(d)})});C(b).forEach(function(a){Il(this,a,b)},a)}function Jl(){this.nb=this.vb=!1;this.yb=D()}Dl.prototype.xa=function(){this.b||Gl(this);return this.m};Dl.prototype.getSchema=Dl.prototype.xa;Dl.prototype.f=function(){var a=new Jc("ns_"+this.m.name()),b=jh(),c=null;b.f(a)?c=b.a(a):(c=new hh,b.b(a,c));return c};Dl.prototype.getGlobal=Dl.prototype.f;
Dl.prototype.connect=function(a){if(null!==this.c&&this.c.b)throw new G(113);if(null===this.c){var b=this.f();b.f(F)||b.b(F,this.xa());this.c=new W(b)}return this.c.f(a)};Dl.prototype.connect=Dl.prototype.connect;Dl.prototype.h=function(a){if(this.a.has(a))throw new G(503,a);if(this.b)throw new G(535);this.a.set(a,new Z(a));return this.a.get(a)};Dl.prototype.createTable=Dl.prototype.h;Dl.prototype.j=function(a){if(this.b)throw new G(535);this.m.b=a;return this};Dl.prototype.setPragma=Dl.prototype.j;
function El(a,b){this.D=a;this.f=b;this.Ta=B();this.b={Kb:!1}}p("lf.schema.DatabaseSchema",El);El.prototype.name=function(){return this.D};El.prototype.name=El.prototype.name;El.prototype.version=function(){return this.f};El.prototype.version=El.prototype.version;El.prototype.a=function(){return C(this.Ta)};El.prototype.tables=El.prototype.a;El.prototype.table=function(a){if(!this.Ta.has(a))throw new G(101,a);return this.Ta.get(a)};El.prototype.table=El.prototype.table;
function pd(a){a.c||(a.c=new ml(a));return a.c}El.prototype.g=function(){return this.b};El.prototype.pragma=El.prototype.g;p("lf.schema.create",function(a,b){return new Dl(a,b)});}.bind(window))()
